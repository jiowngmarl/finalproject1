import{d as x,n as _,o as T,e as c,f as h,p as $,i as p,j as s,w as g,v as F,m as b,t as N,_ as B}from"./index-O14FyZ-J.js";const Y={class:"material-inquiry-page"},q={class:"search-form"},O={class:"button-group"},P=x({__name:"LotCheckPage",setup(j){const v=_([]),m=_([]),d=_(1),t=_({material_code:"",material_name:"",lot_number:"",received_date:null,material_unit:"",material_cls:""}),V=[{key:"lot_number",label:"LOT번호"},{key:"material_code",label:"자재코드"},{key:"material_name",label:"자재명"},{key:"quantity",label:"입고 수량"},{key:"material_unit",label:"단위"},{key:"material_cls",label:"분류"},{key:"received_date",label:"입고일자"}],y=l=>{const e=new Date(l),n=new Date(e.getTime()+9*60*60*1e3),u=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),a=String(n.getMinutes()).padStart(2,"0");return`${u}-${r}-${i} ${o}:${a}`},f=(l,e)=>l.getFullYear()===e.getFullYear()&&l.getMonth()===e.getMonth()&&l.getDate()===e.getDate(),k=()=>{const{material_code:l,material_name:e,lot_number:n,received_date:u,material_unit:r,material_cls:i}=t.value;m.value=v.value.filter(o=>{const a=!l||o.material_code.includes(l),L=!e||o.material_name.includes(e),C=!n||o.lot_number.includes(n),M=!u||f(new Date(o.received_date),new Date(u)),U=!r||o.material_unit.includes(r),w=!i||o.material_cls.includes(i);return a&&L&&C&&M&&U&&w}),d.value=1},S=()=>{t.value={material_code:"",material_name:"",lot_number:"",received_date:null,material_unit:"",material_cls:""},m.value=[...v.value],d.value=1},D=async()=>{try{const l=await F.get("/materialLotList");v.value=l.data,m.value=[...l.data]}catch(l){console.error("❌ 입고 내역 조회 실패:",l)}};return T(()=>{D()}),(l,e)=>{const n=c("va-input"),u=c("va-date-input"),r=c("va-button"),i=c("va-data-table"),o=c("va-pagination");return h(),$("div",Y,[e[9]||(e[9]=p("h2",{class:"page-title"},"자재 입고 조회",-1)),p("div",q,[s(n,{modelValue:t.value.material_code,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.material_code=a),label:"자재코드"},null,8,["modelValue"]),s(n,{modelValue:t.value.material_name,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.material_name=a),label:"자재명"},null,8,["modelValue"]),s(n,{modelValue:t.value.lot_number,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.lot_number=a),label:"LOT번호"},null,8,["modelValue"]),s(u,{modelValue:t.value.received_date,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.received_date=a),label:"입고일자","manual-input":!1,clearable:!0},null,8,["modelValue"]),s(n,{modelValue:t.value.material_unit,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.material_unit=a),label:"단위"},null,8,["modelValue"]),s(n,{modelValue:t.value.material_cls,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.material_cls=a),label:"분류"},null,8,["modelValue"]),p("div",O,[s(r,{onClick:k},{default:g(()=>e[7]||(e[7]=[b("검색")])),_:1,__:[7]}),s(r,{color:"secondary",onClick:S},{default:g(()=>e[8]||(e[8]=[b("초기화")])),_:1,__:[8]})])]),s(i,{items:m.value,columns:V,"per-page":10,"current-page":d.value,"track-by":"lot_number"},{"cell(received_date)":g(({row:a})=>[b(N(y(a.source.received_date)),1)]),_:1},8,["items","current-page"]),s(o,{modelValue:d.value,"onUpdate:modelValue":e[6]||(e[6]=a=>d.value=a),pages:Math.ceil(m.value.length/10),class:"mt-4"},null,8,["modelValue","pages"])])}}}),H=B(P,[["__scopeId","data-v-4e9ae01e"]]);export{H as default};
//# sourceMappingURL=LotCheckPage-DeDFOB-C.js.map
