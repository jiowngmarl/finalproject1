import{d as B,A as $,a as H,n as r,o as R,v as b,e as i,f as y,p as f,i as u,j as l,w as d,m as p,_ as F}from"./index-O14FyZ-J.js";const L={class:"equipment-detail-page p-6"},M={class:"flex justify-end mb-6"},U={class:"flex gap-2"},A={class:"flex justify-center mb-6"},N={class:"w-full max-w-sm"},O=["src"],S={key:1,class:"w-full h-[300px] flex items-center justify-center rounded border border-gray-300 text-gray-500"},z={class:"flex justify-center mb-6"},G={class:"w-full max-w-screen-lg grid grid-cols-2 gap-6"},J={class:"col-span-2 flex flex-col gap-6"},K=B({__name:"EquipmentDetail",setup(P){const x=$(),m=H(),C=x.params.id,g=r(!1);r("downtime");const o=r({code:"",name:"",category:"",line:"",type:"",location:"",installType:"",manufactureDate:"",registerDate:"",maker:"",model:"",serial:"",power:"",maxRuntime:"",maintenanceCycle:"",note:"",imageUrl:""}),w=r([]),h=r([]),V=r([]),k=()=>{m.push("/faq/equipment-inquiry").catch(()=>{m.push("/equipments").catch(()=>{m.push("/facility/equipment").catch(()=>{m.back()})})})},T=()=>{m.push("/faq/equipment-history")},E=t=>{console.error("이미지 로드 실패:",t.target.src)},_=r({}),D=async()=>{try{const{data:t}=await b.get("/common-codes?groups=0E,0T,0I,0F,0L,0M");t&&Object.keys(t).forEach(a=>{Array.isArray(t[a])&&(_.value[a]={},t[a].forEach(n=>{_.value[a][n.value]=n.label}))})}catch{I()}},I=()=>{_.value={"0E":{e1:"생산설비",e2:"품질관리설비",e3:"포장설비"},"0T":{t1:"고속 혼합기",t2:"습식 과립기",t3:"유동층 건조기",t4:"정제 압축기",t5:"정제 코팅기",t6:"자동 포장기",t7:"물리적 검사 장비",t8:"분석 장비"},"0I":{i1:"신규",i2:"교체"},"0F":{f1:"1 공장",f2:"2 공장"},"0L":{l1:"1 층",l2:"2 층"},"0M":{m1:"혼합실",m2:"과립실",m3:"건조실",m4:"압축실",m5:"코팅실",m6:"칭량실",m7:"품질검사실",m8:"포장실"}}},c=(t,a)=>{var n;return a&&(((n=_.value[t])==null?void 0:n[a])||a)||"-"};return R(async()=>{var t,a,n;g.value=!0;try{await D();const{data:s}=await b.get(`/equipments/${C}/detail`);if(s.isSuccessed&&s.data){const e=s.data.equipment,v=e.eq_image?`/uploads/equipment/${e.eq_image}`:"";o.value={code:e.eq_id||"",name:e.eq_name||"",category:c("0E",e.eq_group_code),line:e.line_id?`라인 ${e.line_id}`:"-",type:c("0T",e.eq_type_code),location:`${c("0F",e.eq_factory_code)} ${c("0L",e.eq_floor_code)} ${c("0M",e.eq_room_code)}`,installType:c("0I",e.eq_import_code),manufactureDate:e.eq_manufacture_date||"",registerDate:e.eq_registration_date||"",maker:e.eq_manufacturer||"",model:e.eq_model||"",serial:e.eq_serial_number||"",power:e.eq_power_spec||"",maxRuntime:e.eq_max_operation_time||"",maintenanceCycle:e.eq_inspection_cycle||"",note:e.eq_remark||"-",imageUrl:v},w.value=((t=s.data.downtime)==null?void 0:t.slice(0,5))||[],h.value=((a=s.data.inspection)==null?void 0:a.slice(0,5))||[],V.value=((n=s.data.cleaning)==null?void 0:n.slice(0,5))||[]}}catch{alert("설비 정보를 불러오는데 실패했습니다.")}finally{g.value=!1}}),(t,a)=>{const n=i("VaButton"),s=i("VaCardTitle"),e=i("VaInput"),v=i("VaCardContent"),q=i("VaCard"),j=i("VaTextarea");return y(),f("div",L,[a[4]||(a[4]=u("h1",{class:"va-h3 mb-4"},"설비 상세 정보",-1)),u("div",M,[u("div",U,[l(n,{onClick:k,color:"secondary",class:"w-32"},{default:d(()=>a[0]||(a[0]=[p("목록")])),_:1,__:[0]}),l(n,{color:"info",onClick:T},{default:d(()=>a[1]||(a[1]=[p("점검 이력 조회")])),_:1,__:[1]})])]),u("div",A,[u("div",N,[o.value.imageUrl?(y(),f("img",{key:0,src:o.value.imageUrl,class:"w-full rounded border",onError:E},null,40,O)):(y(),f("div",S," 이미지 없음 "))])]),u("div",z,[u("div",G,[u("div",J,[l(q,null,{default:d(()=>[l(s,null,{default:d(()=>a[2]||(a[2]=[p("설비 기본 정보")])),_:1,__:[2]}),l(v,{class:"grid grid-cols-2 gap-4"},{default:d(()=>[l(e,{"model-value":o.value.code,label:"설비번호",readonly:""},null,8,["model-value"]),l(e,{"model-value":o.value.name,label:"설비명",readonly:""},null,8,["model-value"]),l(e,{"model-value":o.value.category,label:"설비 분류",readonly:""},null,8,["model-value"]),l(e,{"model-value":o.value.type,label:"설비 유형",readonly:""},null,8,["model-value"]),l(e,{"model-value":o.value.line,label:"생산 라인",readonly:"",class:"col-span-2"},null,8,["model-value"]),l(e,{"model-value":o.value.installType,label:"도입 유형",readonly:"",class:"col-span-2"},null,8,["model-value"]),l(e,{"model-value":o.value.location,label:"설비 위치",readonly:"",class:"col-span-2"},null,8,["model-value"]),l(e,{"model-value":o.value.manufactureDate,label:"설비 제조일",readonly:""},null,8,["model-value"]),l(e,{"model-value":o.value.registerDate,label:"설비 등록일",readonly:""},null,8,["model-value"])]),_:1})]),_:1}),l(q,null,{default:d(()=>[l(s,null,{default:d(()=>a[3]||(a[3]=[p("설비 기술 사양")])),_:1,__:[3]}),l(v,{class:"grid grid-cols-2 gap-4"},{default:d(()=>[l(e,{"model-value":o.value.maker,label:"제조사",readonly:""},null,8,["model-value"]),l(e,{"model-value":o.value.serial,label:"제조번호",readonly:""},null,8,["model-value"]),l(e,{"model-value":o.value.model,label:"모델명",readonly:""},null,8,["model-value"]),l(e,{"model-value":o.value.power,label:"정격 전력",readonly:""},null,8,["model-value"]),l(e,{"model-value":o.value.maxRuntime,label:"최대 가동 시간",readonly:""},null,8,["model-value"]),l(e,{"model-value":o.value.maintenanceCycle,label:"정기 점검 주기",readonly:""},null,8,["model-value"])]),_:1})]),_:1}),l(j,{"model-value":o.value.note,label:"비고",readonly:""},null,8,["model-value"])])])])])}}}),W=F(K,[["__scopeId","data-v-384f8bf1"]]);export{W as default};
//# sourceMappingURL=EquipmentDetail-D6_0XESb.js.map
