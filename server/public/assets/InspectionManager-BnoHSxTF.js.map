{"version":3,"file":"InspectionManager-BnoHSxTF.js","sources":["../../../client/src/pages/quality/InspectionManager.vue"],"sourcesContent":["<template>\r\n  <div class=\"product-form\">\r\n    <h3 class=\"form-title\">제품 검사서 등록</h3>\r\n    <br />\r\n\r\n    <!-- 검사 유형 등록 폼 -->\r\n    <div class=\"form-section\">\r\n      <h3 class=\"form-title\">검사 유형 등록</h3>\r\n      <br />\r\n\r\n      <div class=\"input-row\">\r\n        <va-select\r\n          v-model=\"form.processInt\"\r\n          :options=\"processOptions\"\r\n          value-by=\"process_int\"\r\n          text-by=\"process_name\"\r\n          label=\"공정명\"\r\n          class=\"quarter-width\"\r\n        />\r\n        <va-input v-model=\"form.inspValueType\" label=\"판정방식\" class=\"quarter-width\" />\r\n        <va-input v-model=\"form.inspUnit\" label=\"단위\" class=\"quarter-width\" />\r\n      </div>\r\n\r\n      <div class=\"input-row\">\r\n        <va-input v-model=\"form.inspValueQty\" label=\"기준값\" class=\"quarter-width\" />\r\n        <va-input v-model=\"form.inspValueMin\" label=\"최소범위\" class=\"quarter-width\" type=\"number\" />\r\n        <va-input v-model=\"form.inspValueMax\" label=\"최대범위\" class=\"quarter-width\" type=\"number\" />\r\n      </div>\r\n\r\n      <div class=\"input-row\">\r\n        <va-input\r\n          v-model=\"form.inspRemark\"\r\n          label=\"비고\"\r\n          class=\"quarter-width\"\r\n          type=\"textarea\"\r\n          placeholder=\"특이사항을 입력하세요\"\r\n        />\r\n      </div>\r\n\r\n      <br />\r\n\r\n      <div class=\"form-buttons\">\r\n        <va-button @click=\"submitForm\" color=\"primary\">등록</va-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 검사 리스트 테이블 -->\r\n    <div class=\"form-section\">\r\n      <table class=\"custom-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>판정방식</th>\r\n            <th>단위</th>\r\n            <th>기준값</th>\r\n            <th>최소값</th>\r\n            <th>최대값</th>\r\n            <th>비고</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in filteredInspectionList\" :key=\"item.insp_code\">\r\n            <td>{{ item.insp_value_type }}</td>\r\n            <td>{{ item.insp_unit }}</td>\r\n            <td>{{ item.insp_value_qty }}</td>\r\n            <td>{{ item.insp_value_min }}</td>\r\n            <td>{{ item.insp_value_max }}</td>\r\n            <td>{{ item.insp_remark }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, computed, onMounted, watch } from 'vue'\r\nimport axios from 'axios'\r\n\r\n// 타입 정의\r\ninterface InspectionItem {\r\n  process_name: string;\r\n  insp_code: string;\r\n  insp_value_type: string;\r\n  insp_unit: string;\r\n  insp_value_qty: number;\r\n  insp_value_min: number;\r\n  insp_value_max: number;\r\n  insp_remark: string;\r\n  checked?: boolean;\r\n}\r\n\r\n// 상태 정의\r\nconst inspectionList = ref<InspectionItem[]>([])\r\n\r\nconst form = ref({\r\n  processInt: '', // ✅ string으로 변경\r\n  inspValueType: '',\r\n  inspUnit: '',\r\n  inspValueQty: '',\r\n  inspValueMin: 0,\r\n  inspValueMax: 0,\r\n  inspRemark: '',\r\n})\r\n\r\n// 공정명 select 옵션\r\nconst processOptions = ref<{ process_int: string; process_name: string }[]>([]) // ✅ process_int도 string\r\n\r\nconst resetForm = () => {\r\n  form.value = {\r\n    processInt: '',\r\n    inspValueType: '',\r\n    inspUnit: '',\r\n    inspValueQty: '',\r\n    inspValueMin: 0,\r\n    inspValueMax: 0,\r\n    inspRemark: '',\r\n  }\r\n}\r\n\r\n// 등록 요청\r\nconst submitForm = async () => {\r\n  try {\r\n    const payload = {\r\n      processInt: form.value.processInt,\r\n      inspValueType: form.value.inspValueType,\r\n      inspUnit: form.value.inspUnit,\r\n      inspValueQty: Number(form.value.inspValueQty),        \r\n      inspValueMin: Number(form.value.inspValueMin),       \r\n      inspValueMax: Number(form.value.inspValueMax), \r\n      inspRemark: form.value.inspRemark,\r\n    }\r\n\r\n    const res = await axios.post('/inspections/insert', payload)\r\n\r\n    if (res.data.success) {\r\n      alert('검사항목이 등록되었습니다!')\r\n      await loadInspectionList(form.value.processInt)\r\n      resetForm()\r\n    } else {\r\n      alert(res.data.message || '등록 실패')\r\n    }\r\n  } catch (err: any) {\r\n    console.error('등록 중 오류:', err)\r\n    alert('등록 중 오류가 발생했습니다.')\r\n  }\r\n}\r\n\r\n// 검사 리스트 조회\r\nconst loadInspectionList = async (processInt: string) => {\r\n  if (!processInt) {\r\n    inspectionList.value = []\r\n    return\r\n  }\r\n  try {\r\n    const res = await axios.get('/inspections/list', {\r\n      params: { processInt }\r\n    })\r\n    inspectionList.value = res.data\r\n  } catch (err) {\r\n    console.error('검사기준 리스트 조회 실패:', err)\r\n    inspectionList.value = []\r\n  }\r\n}\r\n\r\n// 공정명 목록 조회\r\nonMounted(async () => {\r\n  try {\r\n    const res = await axios.get('/inspections/processList')\r\n    processOptions.value = res.data\r\n  } catch (err) {\r\n    console.error('공정명 목록 조회 실패:', err)\r\n  }\r\n})\r\n\r\n// 공정 선택 시 검사리스트 불러오기\r\nwatch(() => form.value.processInt, (newVal) => {\r\n  loadInspectionList(newVal)\r\n})\r\n\r\n// 현재 선택된 공정의 이름\r\nconst selectedProcessName = computed(() => {\r\n  const found = processOptions.value.find(p => p.process_int === form.value.processInt)\r\n  return found ? found.process_name : ''\r\n})\r\n\r\n// 전체 리스트 출력\r\nconst filteredInspectionList = computed(() => inspectionList.value)\r\n</script>\r\n\r\n\r\n<style scoped>\r\n/* 전체 레이아웃 */\r\n.product-page {\r\n  padding: 1.5rem;\r\n  display: flex;\r\n  justify-content: center;\r\n  height: 739px;\r\n}\r\n\r\n.product-container {\r\n  width: 1060px;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.product-form {\r\n  border-radius: 0.5rem;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);\r\n  padding: 1rem;\r\n}\r\n\r\n/* 섹션 스타일 */\r\n.form-section {\r\n  border: 1px solid #ccc;\r\n  border-radius: 0.5rem;\r\n  padding: 1rem;\r\n  margin-bottom: 1rem;\r\n  background-color: white;\r\n}\r\n\r\n.form-title {\r\n  font-size: 1.125rem;\r\n  font-weight: 600;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n/* 입력 행 정렬 */\r\n.input-row {\r\n  display: flex;\r\n  gap: 1rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n/* 너비 클래스 */\r\n.quarter-width {\r\n  flex: 1;\r\n}\r\n\r\n.half-width {\r\n  flex: 2;\r\n}\r\n\r\n/* 버튼 정렬 */\r\n.form-buttons {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 0.5rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n/* 테이블 스타일 */\r\n.custom-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  background-color: white;\r\n  border-radius: 0.5rem;\r\n  overflow: hidden;\r\n}\r\n\r\n.custom-table th,\r\n.custom-table td {\r\n  padding: 0.75rem;\r\n  border-bottom: 1px solid #e0e0e0;\r\n  text-align: center;\r\n}\r\n\r\n.custom-table th {\r\n  background-color: #ffffff;\r\n  font-weight: bold;\r\n}\r\n\r\n</style>\r\n"],"names":["inspectionList","ref","form","processOptions","resetForm","submitForm","payload","res","axios","loadInspectionList","err","processInt","onMounted","watch","newVal","computed","found","p","filteredInspectionList","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_va_select","$event","_component_va_input","_hoisted_4","_hoisted_5","_hoisted_6","_component_va_button","_hoisted_7","_hoisted_8","_Fragment","_renderList","item","_toDisplayString"],"mappings":"sYA4FM,MAAAA,EAAiBC,EAAsB,CAAA,CAAE,EAEzCC,EAAOD,EAAI,CACf,WAAY,GACZ,cAAe,GACf,SAAU,GACV,aAAc,GACd,aAAc,EACd,aAAc,EACd,WAAY,EAAA,CACb,EAGKE,EAAiBF,EAAqD,CAAA,CAAE,EAExEG,EAAY,IAAM,CACtBF,EAAK,MAAQ,CACX,WAAY,GACZ,cAAe,GACf,SAAU,GACV,aAAc,GACd,aAAc,EACd,aAAc,EACd,WAAY,EAAA,CACd,EAIIG,EAAa,SAAY,CACzB,GAAA,CACF,MAAMC,EAAU,CACd,WAAYJ,EAAK,MAAM,WACvB,cAAeA,EAAK,MAAM,cAC1B,SAAUA,EAAK,MAAM,SACrB,aAAc,OAAOA,EAAK,MAAM,YAAY,EAC5C,aAAc,OAAOA,EAAK,MAAM,YAAY,EAC5C,aAAc,OAAOA,EAAK,MAAM,YAAY,EAC5C,WAAYA,EAAK,MAAM,UAAA,EAGnBK,EAAM,MAAMC,EAAM,KAAK,sBAAuBF,CAAO,EAEvDC,EAAI,KAAK,SACX,MAAM,gBAAgB,EAChB,MAAAE,EAAmBP,EAAK,MAAM,UAAU,EACpCE,KAEJ,MAAAG,EAAI,KAAK,SAAW,OAAO,QAE5BG,EAAU,CACT,QAAA,MAAM,WAAYA,CAAG,EAC7B,MAAM,kBAAkB,CAC1B,CAAA,EAIID,EAAqB,MAAOE,GAAuB,CACvD,GAAI,CAACA,EAAY,CACfX,EAAe,MAAQ,GACvB,MACF,CACI,GAAA,CACF,MAAMO,EAAM,MAAMC,EAAM,IAAI,oBAAqB,CAC/C,OAAQ,CAAE,WAAAG,CAAW,CAAA,CACtB,EACDX,EAAe,MAAQO,EAAI,WACpBG,EAAK,CACJ,QAAA,MAAM,kBAAmBA,CAAG,EACpCV,EAAe,MAAQ,EACzB,CAAA,EAIFY,EAAU,SAAY,CAChB,GAAA,CACF,MAAML,EAAM,MAAMC,EAAM,IAAI,0BAA0B,EACtDL,EAAe,MAAQI,EAAI,WACpBG,EAAK,CACJ,QAAA,MAAM,gBAAiBA,CAAG,CACpC,CAAA,CACD,EAGDG,EAAM,IAAMX,EAAK,MAAM,WAAaY,GAAW,CAC7CL,EAAmBK,CAAM,CAAA,CAC1B,EAG2BC,EAAS,IAAM,CACnC,MAAAC,EAAQb,EAAe,MAAM,QAAUc,EAAE,cAAgBf,EAAK,MAAM,UAAU,EAC7E,OAAAc,EAAQA,EAAM,aAAe,EAAA,CACrC,EAGD,MAAME,EAAyBH,EAAS,IAAMf,EAAe,KAAK,wEAzLhE,OAAAmB,EAAA,EAAAC,EAsEM,MAtENC,EAsEM,CArEJC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,EAAqC,KAAjC,CAAA,MAAM,cAAa,YAAS,EAAA,iBAChCA,EAAM,KAAA,KAAA,KAAA,EAAA,GAGNA,EAsCM,MAtCNC,EAsCM,CArCJF,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAoC,KAAhC,CAAA,MAAM,cAAa,WAAQ,EAAA,eAC/BA,EAAM,KAAA,KAAA,KAAA,EAAA,GAENA,EAWM,MAXNE,EAWM,CAVJC,EAOEC,EAAA,CANS,WAAAzB,EAAA,MAAK,WAAL,sBAAAoB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAM,GAAA1B,EAAA,MAAK,WAAU0B,GACvB,QAASzB,EAAc,MACxB,WAAS,cACT,UAAQ,eACR,MAAM,MACN,MAAM,kDAERuB,EAA4EG,EAAA,CAAzD,WAAA3B,EAAA,MAAK,cAAL,sBAAAoB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAM,GAAA1B,EAAA,MAAK,cAAa0B,GAAE,MAAM,OAAO,MAAM,wCAC1DF,EAAqEG,EAAA,CAAlD,WAAA3B,EAAA,MAAK,SAAL,sBAAAoB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAM,GAAA1B,EAAA,MAAK,SAAQ0B,GAAE,MAAM,KAAK,MAAM,0CAGrDL,EAIM,MAJNO,EAIM,CAHJJ,EAA0EG,EAAA,CAAvD,WAAA3B,EAAA,MAAK,aAAL,sBAAAoB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAM,GAAA1B,EAAA,MAAK,aAAY0B,GAAE,MAAM,MAAM,MAAM,wCACxDF,EAAyFG,EAAA,CAAtE,WAAA3B,EAAA,MAAK,aAAL,sBAAAoB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAM,GAAA1B,EAAA,MAAK,aAAY0B,GAAE,MAAM,OAAO,MAAM,gBAAgB,KAAK,iCAC9EF,EAAyFG,EAAA,CAAtE,WAAA3B,EAAA,MAAK,aAAL,sBAAAoB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAM,GAAA1B,EAAA,MAAK,aAAY0B,GAAE,MAAM,OAAO,MAAM,gBAAgB,KAAK,mCAGhFL,EAQM,MARNQ,EAQM,CAPJL,EAMEG,EAAA,CALS,WAAA3B,EAAA,MAAK,WAAL,sBAAAoB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAM,GAAA1B,EAAA,MAAK,WAAU0B,GACxB,MAAM,KACN,MAAM,gBACN,KAAK,WACL,YAAY,sDAIhBL,EAAM,KAAA,KAAA,KAAA,EAAA,GAENA,EAEM,MAFNS,EAEM,CADJN,EAA6DO,EAAA,CAAjD,QAAO5B,EAAY,MAAM,SAAA,aAAU,IAAEiB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAF,IAAE,CAAA,qBAKrDC,EAuBM,MAvBNW,EAuBM,CAtBJX,EAqBQ,QArBRY,EAqBQ,eApBNZ,EASQ,QAAA,KAAA,CARNA,EAOK,KAAA,KAAA,CANHA,EAAa,UAAT,MAAI,EACRA,EAAW,UAAP,IAAE,EACNA,EAAY,UAAR,KAAG,EACPA,EAAY,UAAR,KAAG,EACPA,EAAY,UAAR,KAAG,EACPA,EAAW,UAAP,IAAE,CAAA,SAGVA,EASQ,QAAA,KAAA,QARNH,EAOKgB,EAAA,KAAAC,EAPcnB,EAAsB,MAA9BoB,QAAXlB,EAOK,KAAA,CAPuC,IAAKkB,EAAK,SAAA,GACpDf,EAAmC,KAAA,KAAAgB,EAA5BD,EAAK,eAAe,EAAA,CAAA,EAC3Bf,EAA6B,KAAA,KAAAgB,EAAtBD,EAAK,SAAS,EAAA,CAAA,EACrBf,EAAkC,KAAA,KAAAgB,EAA3BD,EAAK,cAAc,EAAA,CAAA,EAC1Bf,EAAkC,KAAA,KAAAgB,EAA3BD,EAAK,cAAc,EAAA,CAAA,EAC1Bf,EAAkC,KAAA,KAAAgB,EAA3BD,EAAK,cAAc,EAAA,CAAA,EAC1Bf,EAA+B,KAAA,KAAAgB,EAAxBD,EAAK,WAAW,EAAA,CAAA,CAAA"}