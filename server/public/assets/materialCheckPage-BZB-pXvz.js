import{d as P,n as v,o as B,p as O,i as r,j as n,g as d,w as g,v as S,h as Y,m as y,t as b,_ as $}from"./index-DTBJ0DMA.js";const A={class:"order-search-page"},j={class:"search-section"},q={class:"search-form"},E={class:"button-group"},I={class:"result-section"},T={class:"table-wrapper"},f=5,z=P({__name:"materialCheckPage",setup(G){const l=v({material_code:"",material_name:"",material_unit:"",material_cls:"",expiry_date:null,material_stand:""}),i=v([]),m=v([]),c=v(1),V=t=>{if(!t)return"";const e=typeof t=="string"?new Date(t):t;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`},x=[{key:"material_code",label:"자재코드"},{key:"material_name",label:"자재명"},{key:"quantity",label:"재고"},{key:"material_unit",label:"단위"},{key:"material_stand",label:"규격"},{key:"received_date",label:"입고 일자"},{key:"expiry_date",label:"유통기한"},{key:"material_cls",label:"분류"}],M=async()=>{try{const t=await S.get("/materialCheck");m.value=Array.isArray(t.data)?t.data:[],i.value=[...m.value],console.log("allOrders: ",t.data),console.log("order: ",i.value)}catch(t){console.error("계획 조회 실패",t),m.value=[]}};function D(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function k(){const{material_code:t,material_name:e,material_unit:o,material_stand:_,expiry_date:u,material_cls:p}=l.value;i.value=m.value.filter(s=>{const a=!t||s.material_code.includes(t),w=!e||s.material_name.includes(e),U=!o||s.material_unit.includes(o),C=!_||s.material_stand.includes(_),F=!p||s.material_cls.includes(p),N=!u||D(new Date(s.expiry_date),new Date(u));return a&&w&&U&&C&&F&&N}),c.value=1}function h(){l.value={material_code:"",material_name:"",material_unit:"",material_stand:"",expiry_date:null,material_cls:""}}return B(()=>{M()}),(t,e)=>{const o=d("va-input"),_=d("va-date-input"),u=d("va-button"),p=d("va-data-table"),s=d("va-pagination");return Y(),O("div",A,[r("div",j,[e[9]||(e[9]=r("h3",{class:"section-title"},"자재 조회",-1)),r("div",q,[n(o,{modelValue:l.value.material_code,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.material_code=a),label:"자재코드"},null,8,["modelValue"]),n(_,{modelValue:l.value.expiry_date,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.expiry_date=a),label:"유통기한","manual-input":!1,clearable:!0},null,8,["modelValue"]),n(o,{modelValue:l.value.material_name,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.material_name=a),label:"자재명"},null,8,["modelValue"]),n(o,{modelValue:l.value.material_unit,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.material_unit=a),label:"단위"},null,8,["modelValue"]),n(o,{modelValue:l.value.material_cls,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.material_cls=a),label:"분류"},null,8,["modelValue"]),n(o,{modelValue:l.value.material_stand,"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.material_stand=a),label:"규격"},null,8,["modelValue"]),r("div",E,[n(u,{onClick:k},{default:g(()=>e[7]||(e[7]=[y("조회")])),_:1,__:[7]}),n(u,{color:"secondary",onClick:h},{default:g(()=>e[8]||(e[8]=[y("초기화")])),_:1,__:[8]})])])]),r("div",I,[e[10]||(e[10]=r("h3",{class:"section-title"},"자재 리스트",-1)),r("div",T,[n(p,{items:i.value,columns:x,"per-page":f,"current-page":c.value},{"cell(received_date)":g(({row:a})=>[y(b(V(a.source.received_date)),1)]),"cell(expiry_date)":g(({row:a})=>[y(b(V(a.source.expiry_date)),1)]),_:1},8,["items","current-page"]),n(s,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=a=>c.value=a),pages:Math.max(1,Math.ceil(i.value.length/f)),class:"mt-2"},null,8,["modelValue","pages"])])])])}}}),J=$(z,[["__scopeId","data-v-64c37a7c"]]);export{J as default};
//# sourceMappingURL=materialCheckPage-BZB-pXvz.js.map
