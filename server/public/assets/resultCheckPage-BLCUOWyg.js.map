{"version":3,"file":"resultCheckPage-BLCUOWyg.js","sources":["../../../client/src/pages/prodResult/resultCheckPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"va-pa-4\">\r\n    <!-- üîç Í≤ÄÏÉâ ÌïÑÌÑ∞ -->\r\n    <div class=\"search-grid va-mb-4\">\r\n      <va-input v-model=\"filters.workOrder\" label=\"ÏûëÏóÖÏßÄÏãúÏÑú Î≤àÌò∏\" placeholder=\"ÏûëÏóÖÏßÄÏãúÏÑú Î≤àÌò∏ ÏûÖÎ†•\" readonly />\r\n      <va-input v-model=\"filters.productName\" label=\"Ï†úÌíàÎ™Ö\" placeholder=\"Ï†úÌíàÎ™Ö ÏûÖÎ†•\" readonly />\r\n      <va-input v-model=\"filters.productSpec\" label=\"Ï†úÌíàÍ∑úÍ≤©\" placeholder=\"Ï†úÌíà Í∑úÍ≤© ÏûÖÎ†•\" readonly />\r\n      <va-input v-model=\"filters.resultId\" label=\"ÏûëÏóÖÏã§Ï†Å ID\" placeholder=\"ÏûëÏóÖ Ïã§Ï†Å ID ÏûÖÎ†•\" readonly />\r\n      <va-date-input v-model=\"filters.workDate\" label=\"ÏûëÏóÖÏùºÏûê\" :manual-input=\"false\" :clearable=\"true\" />\r\n      <va-input v-model.number=\"selectedItem.final_qty\" label=\"ÏµúÏ¢Ö ÏàòÎüâ\" />\r\n\r\n      <div class=\"button-group va-mt-2\">\r\n        <va-button color=\"info\" @click=\"openProductPopup\">ÏûëÏóÖÏßÄÏãú Í≤ÄÏÉâ</va-button>\r\n        <va-button color=\"primary\" @click=\"searchItems\">Ï°∞Ìöå</va-button>\r\n        <va-button color=\"secondary\" @click=\"resetFilters\">Ï¥àÍ∏∞Ìôî</va-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- üìã Ïã§Ï†Å ÌÖåÏù¥Î∏î -->\r\n    <va-data-table :items=\"workList\" :columns=\"columns\" track-by=\"result_id\">\r\n      <template #cell(work_start_time)=\"{ row }\">\r\n        {{ formatTime(row.rowData.work_start_time) }}\r\n      </template>\r\n      <template #cell(work_end_time)=\"{ row }\">\r\n        {{ formatTime(row.rowData.work_end_time) }}\r\n      </template>\r\n      <template #cell(duration)=\"{ row }\">\r\n        {{ calculateDuration(row.rowData.work_start_time, row.rowData.work_end_time) }}\r\n      </template>\r\n    </va-data-table>\r\n\r\n    <!-- üîç Ï†úÌíà Í≤ÄÏÉâ ÌåùÏóÖ -->\r\n    <ProductSearchModal v-model:visible=\"isProductPopupOpen\" @apply=\"applyProduct\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport axios from 'axios'\r\nimport ProductSearchModal from '../modals/ProductSearchModal.vue'\r\n\r\n\r\n// ‚úÖ Î™®Îã¨ ÏÉÅÌÉú\r\nconst isProductPopupOpen = ref(false)\r\nconst openProductPopup = () => {\r\n  isProductPopupOpen.value = true\r\n}\r\n\r\n// ‚úÖ ÌïÑÌÑ∞ Îç∞Ïù¥ÌÑ∞\r\nconst filters = ref({\r\n  workOrder: '',\r\n  productName: '',\r\n  productSpec: '',\r\n  resultId: '',\r\n  workDate: '',\r\n})\r\n\r\n// ‚úÖ ÏµúÏ¢Ö ÏàòÎüâ\r\nconst selectedItem = ref({\r\n  final_qty: 0\r\n})\r\n\r\n// ‚úÖ ÏûëÏóÖ Ïã§Ï†Å Î¶¨Ïä§Ìä∏\r\nconst workList = ref<any[]>([])\r\n\r\n// ‚úÖ ÌÖåÏù¥Î∏î Ïª¨Îüº\r\nconst columns = [\r\n  { key: 'result_id', label: 'Ïã§Ï†ÅID' },\r\n  { key: 'process_code', label: 'Í≥µÏ†ïÏΩîÎìú' },\r\n  { key: 'process_name', label: 'Í≥µÏ†ïÎ™Ö' },\r\n  { key: 'work_start_time', label: 'ÏãúÏûëÏãúÍ∞Ñ' },\r\n  { key: 'work_end_time', label: 'Ï¢ÖÎ£åÏãúÍ∞Ñ' },\r\n  { key: 'duration', label: 'ÏÜåÏöîÏãúÍ∞Ñ(Î∂Ñ)' }\r\n]\r\n\r\nconst formatTime = (value: string | null): string => {\r\n  if (!value) return '-'\r\n  const date = new Date(value)\r\n  return date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' })\r\n}\r\n\r\nconst calculateDuration = (start: string, end: string | null): string => {\r\n  if (!start || !end) return '-'\r\n  const startTime = new Date(start)\r\n  const endTime = new Date(end)\r\n  const diffMs = endTime.getTime() - startTime.getTime()\r\n  const diffMin = Math.floor(diffMs / 60000)\r\n  return `${diffMin}Î∂Ñ`\r\n}\r\n\r\nconst applyProduct = (selected: any) => {\r\n  filters.value.workOrder = selected.work_order_no || selected.workOrderNo || ''\r\n  filters.value.productName = selected.product_name || selected.productName || ''\r\n  filters.value.productSpec = selected.product_stand || selected.productSpec || ''\r\n  filters.value.resultId = selected.result_id || selected.resultId || ''\r\n  isProductPopupOpen.value = false\r\n}\r\n\r\n// ‚úÖ Ïã§Ï†Å Ï°∞Ìöå\r\nconst searchItems = async () => {\r\n  try {\r\n    if (!filters.value.workOrder || !filters.value.productSpec) {\r\n      alert('ÏûëÏóÖÏßÄÏãúÏÑú Î≤àÌò∏ ÎòêÎäî Ï†úÌíàÍ∑úÍ≤©Ïù¥ ÎàÑÎùΩÎêòÏóàÏäµÎãàÎã§.')\r\n      return\r\n    }\r\n\r\n    const res = await axios.get(`/prodResult/${filters.value.workOrder}/${filters.value.productSpec}`)\r\n    const mapped = res.data.map((item: any) => ({ ...item, selected: false }))\r\n    workList.value = mapped\r\n  } catch (err) {\r\n    alert('Ïã§Ï†Å Ï°∞Ìöå Ïã§Ìå®')\r\n    console.error(err)\r\n  }\r\n}\r\n\r\n// ‚úÖ ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî\r\nconst resetFilters = () => {\r\n  filters.value = {\r\n    workOrder: '',\r\n    productName: '',\r\n    productSpec: '',\r\n    resultId: '',\r\n    workDate: '',\r\n  }\r\n  selectedItem.value.final_qty = 0\r\n  workList.value = []\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.search-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 1rem;\r\n}\r\n.button-group {\r\n  grid-column: span 3;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 0.5rem;\r\n}\r\n</style>\r\n"],"names":["isProductPopupOpen","ref","openProductPopup","filters","selectedItem","workList","columns","formatTime","value","calculateDuration","start","end","startTime","diffMs","applyProduct","selected","searchItems","mapped","axios","item","err","resetFilters","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_va_input","_cache","$event","_component_va_date_input","_hoisted_3","_component_va_button","_component_va_data_table","_withCtx","row","_createTextVNode","_toDisplayString","ProductSearchModal"],"mappings":"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"}