{"version":3,"file":"EquipmentDetail-BL-SKb96.js","sources":["../../../client/src/pages/equipment/EquipmentDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"equipment-detail-page p-6\">\r\n    <!-- 제목 -->\r\n    <h1 class=\"va-h3 mb-4\">설비 상세 정보</h1>\r\n\r\n    <!-- 버튼 오른쪽 정렬 -->\r\n    <div class=\"flex justify-end mb-6\">\r\n      <div class=\"flex gap-2\">\r\n        <VaButton @click=\"goBack\" color=\"secondary\" class=\"w-32\">목록</VaButton>\r\n        <VaButton color=\"info\" @click=\"goToFullHistory\">점검 이력 조회</VaButton>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 이미지 중앙 정렬 -->\r\n    <div class=\"flex justify-center mb-6\">\r\n      <div class=\"w-full max-w-sm\">\r\n        <img\r\n          v-if=\"equipment.imageUrl\"\r\n          :src=\"equipment.imageUrl\"\r\n          class=\"w-full rounded border\"\r\n          @error=\"onImageError\"\r\n        />\r\n        <div\r\n          v-else\r\n          class=\"w-full h-[300px] flex items-center justify-center rounded border border-gray-300 text-gray-500\"\r\n        >\r\n          이미지 없음\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 정보 카드 중앙 정렬 -->\r\n    <div class=\"flex justify-center mb-6\">\r\n      <div class=\"w-full max-w-screen-lg grid grid-cols-2 gap-6\">\r\n        <div class=\"col-span-2 flex flex-col gap-6\">\r\n          <VaCard>\r\n            <VaCardTitle>설비 기본 정보</VaCardTitle>\r\n            <VaCardContent class=\"grid grid-cols-2 gap-4\">\r\n              <VaInput :model-value=\"equipment.code\" label=\"설비번호\" readonly />\r\n              <VaInput :model-value=\"equipment.name\" label=\"설비명\" readonly />\r\n\r\n              <!-- 설비 분류 + 설비 유형 -->\r\n              <VaInput :model-value=\"equipment.category\" label=\"설비 분류\" readonly />\r\n              <VaInput :model-value=\"equipment.type\" label=\"설비 유형\" readonly />\r\n\r\n              <!-- 생산 라인 전체 -->\r\n              <VaInput :model-value=\"equipment.line\" label=\"생산 라인\" readonly class=\"col-span-2\" />\r\n\r\n              <!-- 도입 유형 전체 -->\r\n              <VaInput :model-value=\"equipment.installType\" label=\"도입 유형\" readonly class=\"col-span-2\" />\r\n\r\n              <!-- 위치 전체 -->\r\n              <VaInput :model-value=\"equipment.location\" label=\"설비 위치\" readonly class=\"col-span-2\" />\r\n\r\n              <!-- 제조일 + 등록일 -->\r\n              <VaInput :model-value=\"equipment.manufactureDate\" label=\"설비 제조일\" readonly />\r\n              <VaInput :model-value=\"equipment.registerDate\" label=\"설비 등록일\" readonly />\r\n            </VaCardContent>\r\n          </VaCard>\r\n\r\n          <VaCard>\r\n            <VaCardTitle>설비 기술 사양</VaCardTitle>\r\n            <VaCardContent class=\"grid grid-cols-2 gap-4\">\r\n              <VaInput :model-value=\"equipment.maker\" label=\"제조사\" readonly />\r\n              <VaInput :model-value=\"equipment.serial\" label=\"제조번호\" readonly />\r\n              <VaInput :model-value=\"equipment.model\" label=\"모델명\" readonly />\r\n              <VaInput :model-value=\"equipment.power\" label=\"정격 전력\" readonly />\r\n              <VaInput :model-value=\"equipment.maxRuntime\" label=\"최대 가동 시간\" readonly />\r\n              <VaInput :model-value=\"equipment.maintenanceCycle\" label=\"정기 점검 주기\" readonly />\r\n            </VaCardContent>\r\n          </VaCard>\r\n\r\n          <VaTextarea :model-value=\"equipment.note\" label=\"비고\" readonly />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport axios from 'axios'\r\n\r\ninterface Equipment {\r\n  code: string\r\n  name: string\r\n  category: string\r\n  line: string\r\n  type: string\r\n  location: string\r\n  installType: string\r\n  manufactureDate: string\r\n  registerDate: string\r\n  maker: string\r\n  model: string\r\n  serial: string\r\n  power: string\r\n  maxRuntime: string\r\n  maintenanceCycle: string\r\n  note: string\r\n  imageUrl: string\r\n}\r\n\r\ninterface CommonCodeItem {\r\n  value: string\r\n  label: string\r\n}\r\n\r\ninterface CommonCodes {\r\n  [key: string]: {\r\n    [key: string]: string\r\n  }\r\n}\r\n\r\ninterface EquipmentData {\r\n  eq_id: string\r\n  eq_name: string\r\n  eq_group_code: string\r\n  eq_type_code: string\r\n  eq_import_code: string\r\n  eq_factory_code: string\r\n  eq_floor_code: string\r\n  eq_room_code: string\r\n  line_id: string | null\r\n  eq_manufacture_date: string\r\n  eq_registration_date: string\r\n  eq_manufacturer: string\r\n  eq_model: string\r\n  eq_serial_number: string\r\n  eq_power_spec: string\r\n  eq_max_operation_time: string\r\n  eq_inspection_cycle: string\r\n  eq_remark: string | null\r\n  eq_image: string | null\r\n}\r\n\r\ninterface HistoryItem {\r\n  [key: string]: any\r\n}\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst equipmentId = route.params.id as string\r\n\r\nconst loading = ref(false)\r\nconst activeTab = ref('downtime')\r\n\r\nconst equipment = ref<Equipment>({\r\n  code: '',\r\n  name: '',\r\n  category: '',\r\n  line: '',\r\n  type: '',\r\n  location: '',\r\n  installType: '',\r\n  manufactureDate: '',\r\n  registerDate: '',\r\n  maker: '',\r\n  model: '',\r\n  serial: '',\r\n  power: '',\r\n  maxRuntime: '',\r\n  maintenanceCycle: '',\r\n  note: '',\r\n  imageUrl: ''\r\n})\r\n\r\nconst downtimeHistory = ref<HistoryItem[]>([])\r\nconst inspectionHistory = ref<HistoryItem[]>([])\r\nconst cleaningHistory = ref<HistoryItem[]>([])\r\n\r\nconst goBack = () => {\r\n  router.push('/faq/equipment-inquiry').catch(() => {\r\n    router.push('/equipments').catch(() => {\r\n      router.push('/facility/equipment').catch(() => {\r\n        router.back()\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\nconst goToFullHistory = () => {\r\n  router.push(`/faq/equipment-history`)\r\n}\r\n\r\nconst onImageError = (event: Event) => {\r\n  console.error('이미지 로드 실패:', (event.target as HTMLImageElement).src)\r\n}\r\n\r\nconst commonCodes = ref<CommonCodes>({})\r\n\r\nconst loadCommonCodes = async () => {\r\n  try {\r\n    const { data } = await axios.get('/common-codes?groups=0E,0T,0I,0F,0L,0M')\r\n    if (data) {\r\n      Object.keys(data).forEach(group => {\r\n        if (Array.isArray(data[group])) {\r\n          commonCodes.value[group] = {}\r\n          data[group].forEach((item: CommonCodeItem) => {\r\n            commonCodes.value[group][item.value] = item.label\r\n          })\r\n        }\r\n      })\r\n    }\r\n  } catch {\r\n    useHardcodedCommonCodes()\r\n  }\r\n}\r\n\r\nconst useHardcodedCommonCodes = () => {\r\n  commonCodes.value = {\r\n    '0E': { 'e1': '생산설비', 'e2': '품질관리설비', 'e3': '포장설비' },\r\n    '0T': { 't1': '고속 혼합기', 't2': '습식 과립기', 't3': '유동층 건조기', 't4': '정제 압축기', 't5': '정제 코팅기', 't6': '자동 포장기', 't7': '물리적 검사 장비', 't8': '분석 장비' },\r\n    '0I': { 'i1': '신규', 'i2': '교체' },\r\n    '0F': { 'f1': '1 공장', 'f2': '2 공장' },\r\n    '0L': { 'l1': '1 층', 'l2': '2 층' },\r\n    '0M': { 'm1': '혼합실', 'm2': '과립실', 'm3': '건조실', 'm4': '압축실', 'm5': '코팅실', 'm6': '칭량실', 'm7': '품질검사실', 'm8': '포장실' }\r\n  }\r\n}\r\n\r\nconst getCodeLabel = (group: string, code: string | null | undefined): string => {\r\n  if (!code) return '-'\r\n  return commonCodes.value[group]?.[code] || code || '-'\r\n}\r\n\r\nonMounted(async () => {\r\n  loading.value = true\r\n  try {\r\n    await loadCommonCodes()\r\n    const { data } = await axios.get(`/equipments/${equipmentId}/detail`)\r\n    if (data.isSuccessed && data.data) {\r\n      const eq = data.data.equipment\r\n      const imageUrl = eq.eq_image ? `/uploads/equipment/${eq.eq_image}` : ''\r\n      equipment.value = {\r\n        code: eq.eq_id || '',\r\n        name: eq.eq_name || '',\r\n        category: getCodeLabel('0E', eq.eq_group_code),\r\n        line: eq.line_id ? `라인 ${eq.line_id}` : '-',\r\n        type: getCodeLabel('0T', eq.eq_type_code),\r\n        location: `${getCodeLabel('0F', eq.eq_factory_code)} ${getCodeLabel('0L', eq.eq_floor_code)} ${getCodeLabel('0M', eq.eq_room_code)}`,\r\n        installType: getCodeLabel('0I', eq.eq_import_code),\r\n        manufactureDate: eq.eq_manufacture_date || '',\r\n        registerDate: eq.eq_registration_date || '',\r\n        maker: eq.eq_manufacturer || '',\r\n        model: eq.eq_model || '',\r\n        serial: eq.eq_serial_number || '',\r\n        power: eq.eq_power_spec || '',\r\n        maxRuntime: eq.eq_max_operation_time || '',\r\n        maintenanceCycle: eq.eq_inspection_cycle || '',\r\n        note: eq.eq_remark || '-',\r\n        imageUrl\r\n      }\r\n      downtimeHistory.value = data.data.downtime?.slice(0, 5) || []\r\n      inspectionHistory.value = data.data.inspection?.slice(0, 5) || []\r\n      cleaningHistory.value = data.data.cleaning?.slice(0, 5) || []\r\n    }\r\n  } catch {\r\n    alert('설비 정보를 불러오는데 실패했습니다.')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.equipment-detail-page img {\r\n  max-height: 300px;\r\n  object-fit: contain;\r\n}\r\n\r\n.history-table {\r\n  overflow-x: auto;\r\n}\r\n\r\n.va-table {\r\n  border-collapse: collapse;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.va-table th,\r\n.va-table td {\r\n  border: 1px solid #e0e0e0;\r\n  padding: 0.5rem;\r\n  text-align: left;\r\n}\r\n\r\n.va-table th {\r\n  background-color: #f5f5f5;\r\n  font-weight: 600;\r\n}\r\n\r\n.va-table tr:hover {\r\n  background-color: #f9f9f9;\r\n}\r\n</style>\r\n"],"names":["route","useRoute","router","useRouter","equipmentId","loading","ref","equipment","downtimeHistory","inspectionHistory","cleaningHistory","goBack","goToFullHistory","onImageError","event","commonCodes","loadCommonCodes","data","axios","group","item","useHardcodedCommonCodes","getCodeLabel","code","_a","onMounted","eq","imageUrl","_b","_c","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_VaButton","_hoisted_4","_hoisted_5","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_component_VaCard","_component_VaCardTitle","_component_VaCardContent","_component_VaInput","_component_VaTextarea"],"mappings":"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"}