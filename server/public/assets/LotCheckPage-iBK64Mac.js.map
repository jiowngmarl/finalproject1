{"version":3,"file":"LotCheckPage-iBK64Mac.js","sources":["../../../client/src/pages/material/LotCheckPage.vue"],"sourcesContent":["<template>\n  <div class=\"material-inquiry-page\">\n    <h2 class=\"page-title\">자재 입고 조회</h2>\n\n    <!-- 검색 필터 -->\n    <div class=\"search-form\">\n      <va-input v-model=\"filters.material_code\" label=\"자재코드\" />\n      <va-input v-model=\"filters.material_name\" label=\"자재명\" />\n      <va-input v-model=\"filters.lot_number\" label=\"LOT번호\" />\n      <va-date-input\n        v-model=\"filters.received_date\"\n        label=\"입고일자\"\n        :manual-input=\"false\"\n        :clearable=\"true\"\n      />\n      <va-input v-model=\"filters.material_unit\" label=\"단위\" />\n      <va-input v-model=\"filters.material_cls\" label=\"분류\" />\n\n      <div class=\"button-group\">\n        <va-button @click=\"searchMaterials\"> 검색 </va-button>\n        <va-button color=\"secondary\" @click=\"resetFilters\"> 초기화 </va-button>\n      </div>\n    </div>\n\n    <!-- 입고 내역 테이블 -->\n    <va-data-table\n      v-model:current-page=\"page\"\n      :items=\"filteredList\"\n      :columns=\"columns\"\n      :per-page=\"10\"\n      track-by=\"lot_number\"\n    >\n      <template #cell(received_date)=\"{ row }\">\n        {{ formatToKST(row.source.received_date) }}\n      </template>\n    </va-data-table>\n\n    <va-pagination\n      v-model=\"page\"\n      :pages=\"Math.ceil(filteredList.length / 10)\"\n      class=\"mt-4\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport axios from \"axios\";\nimport { ref, computed, onMounted } from \"vue\";\n\ninterface MaterialLot {\n  lot_number: string;\n  material_code: string;\n  material_name: string;\n  quantity: number;\n  material_unit: string;\n  material_cls: string;\n  received_date: string;\n}\n\nconst lotList = ref<MaterialLot[]>([]);\nconst filteredList = ref<MaterialLot[]>([]);\nconst page = ref(1);\n\nconst filters = ref({\n  material_code: \"\",\n  material_name: \"\",\n  lot_number: \"\",\n  received_date: null as Date | null,\n  material_unit: \"\",\n  material_cls: \"\",\n});\n\nconst columns = [\n  { key: \"lot_number\", label: \"LOT번호\" },\n  { key: \"material_code\", label: \"자재코드\" },\n  { key: \"material_name\", label: \"자재명\" },\n  { key: \"quantity\", label: \"입고 수량\" },\n  { key: \"material_unit\", label: \"단위\" },\n  { key: \"material_cls\", label: \"분류\" },\n  { key: \"received_date\", label: \"입고일자\" },\n];\n\nconst formatToKST = (isoDate: string): string => {\n  const date = new Date(isoDate);\n  const kst = new Date(date.getTime() + 9 * 60 * 60 * 1000);\n  const yyyy = kst.getFullYear();\n  const mm = String(kst.getMonth() + 1).padStart(2, \"0\");\n  const dd = String(kst.getDate()).padStart(2, \"0\");\n  const hh = String(kst.getHours()).padStart(2, \"0\");\n  const mi = String(kst.getMinutes()).padStart(2, \"0\");\n  return `${yyyy}-${mm}-${dd} ${hh}:${mi}`;\n};\n\nconst isSameDate = (d1: Date, d2: Date): boolean => {\n  return (\n    d1.getFullYear() === d2.getFullYear() &&\n    d1.getMonth() === d2.getMonth() &&\n    d1.getDate() === d2.getDate()\n  );\n};\n\nconst searchMaterials = () => {\n  const {\n    material_code,\n    material_name,\n    lot_number,\n    received_date,\n    material_unit,\n    material_cls,\n  } = filters.value;\n\n  filteredList.value = lotList.value.filter((item) => {\n    const matchesCode =\n      !material_code || item.material_code.includes(material_code);\n    const matchesName =\n      !material_name || item.material_name.includes(material_name);\n    const matchesLot = !lot_number || item.lot_number.includes(lot_number);\n    const matchesDate =\n      !received_date ||\n      isSameDate(new Date(item.received_date), new Date(received_date));\n    const matchesUnit =\n      !material_unit || item.material_unit.includes(material_unit);\n    const matchesCls =\n      !material_cls || item.material_cls.includes(material_cls);\n\n    return (\n      matchesCode &&\n      matchesName &&\n      matchesLot &&\n      matchesDate &&\n      matchesUnit &&\n      matchesCls\n    );\n  });\n\n  page.value = 1;\n};\n\nconst resetFilters = () => {\n  filters.value = {\n    material_code: \"\",\n    material_name: \"\",\n    lot_number: \"\",\n    received_date: null,\n    material_unit: \"\",\n    material_cls: \"\",\n  };\n  filteredList.value = [...lotList.value];\n  page.value = 1;\n};\n\nconst fetchMaterialsLot = async () => {\n  try {\n    const res = await axios.get(\"/materialLotList\");\n    lotList.value = res.data;\n    filteredList.value = [...res.data];\n  } catch (err) {\n    console.error(\"❌ 입고 내역 조회 실패:\", err);\n  }\n};\n\nonMounted(() => {\n  fetchMaterialsLot();\n});\n</script>\n\n<style scoped>\n.material-inquiry-page {\n  padding: 1.5rem;\n  max-width: 1000px;\n  margin: 0 auto;\n}\n\n.page-title {\n  font-size: 1.5rem;\n  font-weight: bold;\n  margin-bottom: 2rem;\n}\n\n.search-form {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 20px;\n  row-gap: 16px;\n  margin-bottom: 1.5rem;\n}\n\n.button-group {\n  grid-column: span 2;\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n}\n</style>\n"],"names":["lotList","ref","filteredList","page","filters","columns","formatToKST","isoDate","date","kst","yyyy","mm","dd","hh","mi","isSameDate","d1","d2","searchMaterials","material_code","material_name","lot_number","received_date","material_unit","material_cls","item","matchesCode","matchesName","matchesLot","matchesDate","matchesUnit","matchesCls","resetFilters","fetchMaterialsLot","res","axios","err","onMounted","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_createVNode","_component_va_input","$event","_component_va_date_input","_hoisted_3","_component_va_button","_component_va_data_table","_withCtx","row","_createTextVNode","_toDisplayString","_component_va_pagination"],"mappings":"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"}