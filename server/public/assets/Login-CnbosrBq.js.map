{"version":3,"file":"Login-CnbosrBq.js","sources":["../../../client/node_modules/vuestic-ui/dist/es/src/composables/useForm/useForm.js","../../../client/src/pages/auth/Login.vue"],"sourcesContent":["import { ref, computed } from \"vue\";\nimport { u as useTemplateRef } from \"../useTemplateRef.js\";\nconst useForm = (elRef) => {\n  const form = typeof elRef === \"string\" ? useTemplateRef(elRef) : typeof elRef === \"undefined\" ? ref() : elRef;\n  return {\n    formRef: form,\n    isValid: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.isValid) || false;\n    }),\n    immediate: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.immediate) || false;\n    }),\n    isLoading: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.isLoading) || false;\n    }),\n    isDirty: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.isDirty) || false;\n    }),\n    isTouched: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.isTouched) || false;\n    }),\n    fields: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.fields) ?? [];\n    }),\n    fieldsNamed: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.fieldsNamed) ?? [];\n    }),\n    fieldNames: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.fieldNames) ?? [];\n    }),\n    formData: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.formData) ?? {};\n    }),\n    errorMessages: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.errorMessages) || [];\n    }),\n    errorMessagesNamed: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.errorMessagesNamed) || {};\n    }),\n    validate: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.validate();\n    },\n    validateAsync: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.validateAsync();\n    },\n    reset: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.reset();\n    },\n    resetValidation: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.resetValidation();\n    },\n    focus: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.focus();\n    },\n    focusInvalidField: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.focusInvalidField();\n    }\n  };\n};\nexport {\n  useForm as u\n};\n//# sourceMappingURL=useForm.js.map\n","<template>\r\n  <VaForm ref=\"form\" @submit.prevent=\"handleLogin\">\r\n    <h1 class=\"font-semibold text-4xl mb-4\">로그인</h1>\r\n\r\n    <!-- 사원아이디 입력 -->\r\n    <VaInput \r\n      v-model=\"formData.employee_id\"\r\n      :rules=\"[validators.required]\"\r\n      class=\"mb-4\"\r\n      label=\"사원아이디\"\r\n      placeholder=\"사원아이디를 입력하세요\"\r\n      :loading=\"authStore.isLoading\"\r\n      :disabled=\"authStore.isLoading\"\r\n    />\r\n\r\n    <!-- 비밀번호 입력 -->\r\n    <VaValue v-slot=\"isPasswordVisible\" :default-value=\"false\">\r\n      <VaInput\r\n        v-model=\"formData.password\"\r\n        :rules=\"[validators.required]\"\r\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\r\n        class=\"mb-4\"\r\n        label=\"비밀번호\"\r\n        placeholder=\"비밀번호를 입력하세요\"\r\n        :loading=\"authStore.isLoading\"\r\n        :disabled=\"authStore.isLoading\"\r\n        @keyup.enter=\"handleLogin\"\r\n        @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\r\n      >\r\n        <template #appendInner>\r\n          <span\r\n            class=\"password-toggle\"\r\n          >\r\n            {{ isPasswordVisible.value ? '숨기기' : '보기' }}\r\n          </span>\r\n        </template>\r\n      </VaInput>\r\n    </VaValue>\r\n\r\n    <!-- 로그인 버튼 -->\r\n    <div class=\"flex justify-center mt-4 mb-3\">\r\n      <VaButton \r\n        class=\"w-full\" \r\n        :loading=\"authStore.isLoading\"\r\n        :disabled=\"authStore.isLoading || !formData.employee_id || !formData.password\"\r\n        @click=\"handleLogin\"\r\n      >\r\n        {{ authStore.isLoading ? '로그인 중...' : '로그인' }}\r\n      </VaButton>\r\n    </div>\r\n\r\n    <!-- 대시보드로 돌아가기 버튼 -->\r\n    <div class=\"flex justify-center\">\r\n      <VaButton \r\n        preset=\"secondary\"\r\n        color=\"secondary\"\r\n        class=\"w-full\"\r\n        :disabled=\"authStore.isLoading\"\r\n        @click=\"goToDashboard\"\r\n      >\r\n        대시보드로 돌아가기\r\n      </VaButton>\r\n    </div>\r\n\r\n  </VaForm>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { reactive, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useForm } from 'vuestic-ui'\r\nimport { useAuthStore } from '@/stores/authStore'\r\n\r\n// 컴포넌트 설정\r\nconst { validate } = useForm('form')\r\nconst router = useRouter()\r\nconst authStore = useAuthStore()\r\n\r\n// 유효성 검사 규칙\r\nconst validators = {\r\n  required: (value: string) => !!value || '필수 입력 항목입니다.'\r\n}\r\n\r\n// 상태 관리\r\nconst formData = reactive({\r\n  employee_id: '',\r\n  password: '',\r\n})\r\n\r\n// 네비게이션 함수\r\nconst goToDashboard = () => {\r\n  router.push({ name: 'dashboard' })\r\n}\r\n\r\n// 로그인 처리 함수\r\nconst handleLogin = async () => {\r\n  // 폼 유효성 검사\r\n  if (!(await validate())) return\r\n  \r\n  console.log('로그인 시도:', formData.employee_id)\r\n  \r\n  // Pinia 스토어의 login 함수 사용\r\n  const result = await authStore.login(formData.employee_id, formData.password)\r\n  \r\n  if (result.success) {\r\n    console.log('로그인 성공, 대시보드로 이동')\r\n    // 성공 시 대시보드로 이동\r\n    setTimeout(() => {\r\n      router.push({ name: 'dashboard' })\r\n    }, 2000)\r\n  } else {\r\n    console.log('로그인 실패:', result.message)\r\n    // 실패 시 비밀번호 필드만 초기화\r\n    formData.password = ''\r\n  }\r\n}\r\n\r\n// 컴포넌트 초기화\r\nonMounted(async () => {\r\n  console.log('Login.vue 마운트됨')\r\n  \r\n  // 스토어 초기화 (axios 설정, 인증 상태 확인 등)\r\n  await authStore.initialize()\r\n  console.log('Login.vue - authStore 초기화 완료')\r\n  console.log('Login.vue - 현재 로그인 상태:', authStore.isLoggedIn)\r\n  \r\n  // 이미 로그인된 경우 대시보드로 이동\r\n  if (authStore.isLoggedIn) {\r\n    console.log('이미 로그인되어 있음, 대시보드로 이동')\r\n    router.push({ name: 'dashboard' })\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.va-form:has(.va-input--loading) {\r\n  opacity: 0.8;\r\n  pointer-events: none;\r\n}\r\n\r\n.va-button--disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.password-toggle {\r\n  color: #6c757d;\r\n  font-size: 14px;\r\n  padding: 4px 8px;\r\n  display: inline-block;\r\n  white-space: nowrap;\r\n  line-height: 1;\r\n  min-width: 40px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  user-select: none;\r\n  transition: color 0.2s ease;\r\n}\r\n\r\n.password-toggle:hover {\r\n  color: #495057;\r\n}\r\n</style>"],"names":["useForm","elRef","form","useTemplateRef","computed","_a","validate","router","useRouter","authStore","useAuthStore","validators","value","formData","reactive","goToDashboard","handleLogin","result","onMounted","_createBlock","_component_VaForm","_cache","_createElementVNode","_createVNode","_component_VaInput","$event","_unref","_component_VaValue","_withCtx","isPasswordVisible","_hoisted_1","_toDisplayString","_hoisted_2","_component_VaButton","_createTextVNode","_hoisted_3"],"mappings":"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","x_google_ignoreList":[0]}