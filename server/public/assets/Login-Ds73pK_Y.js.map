{"version":3,"file":"Login-Ds73pK_Y.js","sources":["../../../client/node_modules/vuestic-ui/dist/es/src/composables/useForm/useForm.js","../../../client/src/pages/auth/Login.vue"],"sourcesContent":["import { ref, computed } from \"vue\";\nimport { u as useTemplateRef } from \"../useTemplateRef.js\";\nconst useForm = (elRef) => {\n  const form = typeof elRef === \"string\" ? useTemplateRef(elRef) : typeof elRef === \"undefined\" ? ref() : elRef;\n  return {\n    formRef: form,\n    isValid: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.isValid) || false;\n    }),\n    immediate: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.immediate) || false;\n    }),\n    isLoading: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.isLoading) || false;\n    }),\n    isDirty: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.isDirty) || false;\n    }),\n    isTouched: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.isTouched) || false;\n    }),\n    fields: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.fields) ?? [];\n    }),\n    fieldsNamed: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.fieldsNamed) ?? [];\n    }),\n    fieldNames: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.fieldNames) ?? [];\n    }),\n    formData: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.formData) ?? {};\n    }),\n    errorMessages: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.errorMessages) || [];\n    }),\n    errorMessagesNamed: computed(() => {\n      var _a;\n      return ((_a = form.value) == null ? void 0 : _a.errorMessagesNamed) || {};\n    }),\n    validate: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.validate();\n    },\n    validateAsync: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.validateAsync();\n    },\n    reset: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.reset();\n    },\n    resetValidation: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.resetValidation();\n    },\n    focus: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.focus();\n    },\n    focusInvalidField: () => {\n      var _a;\n      return (_a = form.value) == null ? void 0 : _a.focusInvalidField();\n    }\n  };\n};\nexport {\n  useForm as u\n};\n//# sourceMappingURL=useForm.js.map\n","<template>\n  <VaForm ref=\"form\" @submit.prevent=\"handleLogin\">\n    <h1 class=\"font-semibold text-4xl mb-4\">로그인</h1>\n\n    <!-- 사원아이디 입력 -->\n    <VaInput\n      v-model=\"formData.employee_id\"\n      :rules=\"[validators.required]\"\n      class=\"mb-4\"\n      label=\"사원아이디\"\n      placeholder=\"사원아이디를 입력하세요\"\n      :loading=\"authStore.isLoading\"\n      :disabled=\"authStore.isLoading\"\n    />\n\n    <!-- 비밀번호 입력 -->\n    <VaValue v-slot=\"isPasswordVisible\" :default-value=\"false\">\n      <VaInput\n        v-model=\"formData.password\"\n        :rules=\"[validators.required]\"\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\n        class=\"mb-4\"\n        label=\"비밀번호\"\n        placeholder=\"비밀번호를 입력하세요\"\n        :loading=\"authStore.isLoading\"\n        :disabled=\"authStore.isLoading\"\n        @keyup.enter=\"handleLogin\"\n        @click-append-inner.stop=\"\n          isPasswordVisible.value = !isPasswordVisible.value\n        \"\n      >\n        <template #appendInner>\n          <span class=\"password-toggle\">\n            {{ isPasswordVisible.value ? \"숨기기\" : \"보기\" }}\n          </span>\n        </template>\n      </VaInput>\n    </VaValue>\n\n    <!-- 로그인 버튼 -->\n    <div class=\"flex justify-center mt-4 mb-3\">\n      <VaButton\n        class=\"w-full\"\n        :loading=\"authStore.isLoading\"\n        :disabled=\"\n          authStore.isLoading || !formData.employee_id || !formData.password\n        \"\n        @click=\"handleLogin\"\n      >\n        {{ authStore.isLoading ? \"로그인 중...\" : \"로그인\" }}\n      </VaButton>\n    </div>\n\n    <!-- 대시보드로 돌아가기 버튼 -->\n    <div class=\"flex justify-center\">\n      <VaButton\n        preset=\"secondary\"\n        color=\"secondary\"\n        class=\"w-full\"\n        :disabled=\"authStore.isLoading\"\n        @click=\"goToDashboard\"\n      >\n        대시보드로 돌아가기\n      </VaButton>\n    </div>\n  </VaForm>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useForm } from \"vuestic-ui\";\nimport { useAuthStore } from \"@/stores/authStore\";\n\n// 컴포넌트 설정\nconst { validate } = useForm(\"form\");\nconst router = useRouter();\nconst authStore = useAuthStore();\n\n// 유효성 검사 규칙\nconst validators = {\n  required: (value: string) => !!value || \"필수 입력 항목입니다.\",\n};\n\n// 상태 관리\nconst formData = reactive({\n  employee_id: \"\",\n  password: \"\",\n});\n\n// 네비게이션 함수\nconst goToDashboard = () => {\n  router.push({ name: \"dashboard\" });\n};\n\n// 로그인 처리 함수\nconst handleLogin = async () => {\n  // 폼 유효성 검사\n  if (!(await validate())) return;\n\n  console.log(\"로그인 시도:\", formData.employee_id);\n\n  // Pinia 스토어의 login 함수 사용\n  const result = await authStore.login(formData.employee_id, formData.password);\n\n  if (result.success) {\n    console.log(\"로그인 성공, 대시보드로 이동\");\n    // 성공 시 대시보드로 이동\n    setTimeout(() => {\n      router.push({ name: \"dashboard\" });\n    }, 2000);\n  } else {\n    console.log(\"로그인 실패:\", result.message);\n    // 실패 시 비밀번호 필드만 초기화\n    formData.password = \"\";\n  }\n};\n\n// 컴포넌트 초기화\nonMounted(async () => {\n  console.log(\"Login.vue 마운트됨\");\n\n  // 스토어 초기화 (axios 설정, 인증 상태 확인 등)\n  await authStore.initialize();\n  console.log(\"Login.vue - authStore 초기화 완료\");\n  console.log(\"Login.vue - 현재 로그인 상태:\", authStore.isLoggedIn);\n\n  // 이미 로그인된 경우 대시보드로 이동\n  if (authStore.isLoggedIn) {\n    console.log(\"이미 로그인되어 있음, 대시보드로 이동\");\n    router.push({ name: \"dashboard\" });\n  }\n});\n</script>\n\n<style scoped>\n.va-form:has(.va-input--loading) {\n  opacity: 0.8;\n  pointer-events: none;\n}\n\n.va-button--disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.password-toggle {\n  color: #6c757d;\n  font-size: 14px;\n  padding: 4px 8px;\n  display: inline-block;\n  white-space: nowrap;\n  line-height: 1;\n  min-width: 40px;\n  text-align: center;\n  cursor: pointer;\n  user-select: none;\n  transition: color 0.2s ease;\n}\n\n.password-toggle:hover {\n  color: #495057;\n}\n</style>\n"],"names":["useForm","elRef","form","useTemplateRef","computed","_a","validate","router","useRouter","authStore","useAuthStore","validators","value","formData","reactive","goToDashboard","handleLogin","result","onMounted","_createBlock","_component_VaForm","_cache","_createElementVNode","_createVNode","_component_VaInput","$event","_unref","_component_VaValue","_withCtx","isPasswordVisible","_withModifiers","_hoisted_1","_toDisplayString","_hoisted_2","_component_VaButton","_createTextVNode","_hoisted_3"],"mappings":"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","x_google_ignoreList":[0]}