{"version":3,"file":"resultCheckPage-iKnxnT0g.js","sources":["../../../client/src/pages/prodResult/resultCheckPage.vue"],"sourcesContent":["<template>\n  <div class=\"va-pa-4\">\n    <!-- üîç Í≤ÄÏÉâ ÌïÑÌÑ∞ -->\n    <div class=\"search-grid va-mb-4\">\n      <va-input\n        v-model=\"filters.workOrder\"\n        label=\"ÏûëÏóÖÏßÄÏãúÏÑú Î≤àÌò∏\"\n        placeholder=\"ÏûëÏóÖÏßÄÏãúÏÑú Î≤àÌò∏ ÏûÖÎ†•\"\n        readonly\n      />\n      <va-input\n        v-model=\"filters.productName\"\n        label=\"Ï†úÌíàÎ™Ö\"\n        placeholder=\"Ï†úÌíàÎ™Ö ÏûÖÎ†•\"\n        readonly\n      />\n      <va-input\n        v-model=\"filters.productSpec\"\n        label=\"Ï†úÌíàÍ∑úÍ≤©\"\n        placeholder=\"Ï†úÌíà Í∑úÍ≤© ÏûÖÎ†•\"\n        readonly\n      />\n      <va-input\n        v-model=\"filters.resultId\"\n        label=\"ÏûëÏóÖÏã§Ï†Å ID\"\n        placeholder=\"ÏûëÏóÖ Ïã§Ï†Å ID ÏûÖÎ†•\"\n        readonly\n      />\n      <va-date-input\n        v-model=\"filters.workDate\"\n        label=\"ÏûëÏóÖÏùºÏûê\"\n        :manual-input=\"false\"\n        :clearable=\"true\"\n      />\n      <va-input v-model.number=\"selectedItem.final_qty\" label=\"ÏµúÏ¢Ö ÏàòÎüâ\" />\n\n      <div class=\"button-group va-mt-2\">\n        <va-button color=\"info\" @click=\"openProductPopup\">\n          ÏûëÏóÖÏßÄÏãú Í≤ÄÏÉâ\n        </va-button>\n        <va-button color=\"primary\" @click=\"searchItems\"> Ï°∞Ìöå </va-button>\n        <va-button color=\"secondary\" @click=\"resetFilters\"> Ï¥àÍ∏∞Ìôî </va-button>\n      </div>\n    </div>\n\n    <!-- üìã Ïã§Ï†Å ÌÖåÏù¥Î∏î -->\n    <va-data-table :items=\"workList\" :columns=\"columns\" track-by=\"result_id\">\n      <template #cell(work_start_time)=\"{ row }\">\n        {{ formatTime(row.rowData.work_start_time) }}\n      </template>\n      <template #cell(work_end_time)=\"{ row }\">\n        {{ formatTime(row.rowData.work_end_time) }}\n      </template>\n      <template #cell(duration)=\"{ row }\">\n        {{\n          calculateDuration(\n            row.rowData.work_start_time,\n            row.rowData.work_end_time,\n          )\n        }}\n      </template>\n    </va-data-table>\n\n    <!-- üîç Ï†úÌíà Í≤ÄÏÉâ ÌåùÏóÖ -->\n    <ProductSearchModal\n      v-model:visible=\"isProductPopupOpen\"\n      @apply=\"applyProduct\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport ProductSearchModal from \"../modals/ProductSearchModal.vue\";\n\n// ‚úÖ Î™®Îã¨ ÏÉÅÌÉú\nconst isProductPopupOpen = ref(false);\nconst openProductPopup = () => {\n  isProductPopupOpen.value = true;\n};\n\n// ‚úÖ ÌïÑÌÑ∞ Îç∞Ïù¥ÌÑ∞\nconst filters = ref({\n  workOrder: \"\",\n  productName: \"\",\n  productSpec: \"\",\n  resultId: \"\",\n  workDate: \"\",\n});\n\n// ‚úÖ ÏµúÏ¢Ö ÏàòÎüâ\nconst selectedItem = ref({\n  final_qty: 0,\n});\n\n// ‚úÖ ÏûëÏóÖ Ïã§Ï†Å Î¶¨Ïä§Ìä∏\nconst workList = ref<any[]>([]);\n\n// ‚úÖ ÌÖåÏù¥Î∏î Ïª¨Îüº\nconst columns = [\n  { key: \"result_id\", label: \"Ïã§Ï†ÅID\" },\n  { key: \"process_code\", label: \"Í≥µÏ†ïÏΩîÎìú\" },\n  { key: \"process_name\", label: \"Í≥µÏ†ïÎ™Ö\" },\n  { key: \"work_start_time\", label: \"ÏãúÏûëÏãúÍ∞Ñ\" },\n  { key: \"work_end_time\", label: \"Ï¢ÖÎ£åÏãúÍ∞Ñ\" },\n  { key: \"duration\", label: \"ÏÜåÏöîÏãúÍ∞Ñ(Î∂Ñ)\" },\n];\n\nconst formatTime = (value: string | null): string => {\n  if (!value) return \"-\";\n  const date = new Date(value);\n  return date.toLocaleTimeString(\"ko-KR\", {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n};\n\nconst calculateDuration = (start: string, end: string | null): string => {\n  if (!start || !end) return \"-\";\n  const startTime = new Date(start);\n  const endTime = new Date(end);\n  const diffMs = endTime.getTime() - startTime.getTime();\n  const diffMin = Math.floor(diffMs / 60000);\n  return `${diffMin}Î∂Ñ`;\n};\n\nconst applyProduct = (selected: any) => {\n  filters.value.workOrder =\n    selected.work_order_no || selected.workOrderNo || \"\";\n  filters.value.productName =\n    selected.product_name || selected.productName || \"\";\n  filters.value.productSpec =\n    selected.product_stand || selected.productSpec || \"\";\n  filters.value.resultId = selected.result_id || selected.resultId || \"\";\n  isProductPopupOpen.value = false;\n};\n\n// ‚úÖ Ïã§Ï†Å Ï°∞Ìöå\nconst searchItems = async () => {\n  try {\n    if (!filters.value.workOrder || !filters.value.productSpec) {\n      alert(\"ÏûëÏóÖÏßÄÏãúÏÑú Î≤àÌò∏ ÎòêÎäî Ï†úÌíàÍ∑úÍ≤©Ïù¥ ÎàÑÎùΩÎêòÏóàÏäµÎãàÎã§.\");\n      return;\n    }\n\n    const res = await axios.get(\n      `/prodResult/${filters.value.workOrder}/${filters.value.productSpec}`,\n    );\n    const mapped = res.data.map((item: any) => ({ ...item, selected: false }));\n    workList.value = mapped;\n  } catch (err) {\n    alert(\"Ïã§Ï†Å Ï°∞Ìöå Ïã§Ìå®\");\n    console.error(err);\n  }\n};\n\n// ‚úÖ ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî\nconst resetFilters = () => {\n  filters.value = {\n    workOrder: \"\",\n    productName: \"\",\n    productSpec: \"\",\n    resultId: \"\",\n    workDate: \"\",\n  };\n  selectedItem.value.final_qty = 0;\n  workList.value = [];\n};\n</script>\n\n<style scoped>\n.search-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n}\n.button-group {\n  grid-column: span 3;\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.5rem;\n}\n</style>\n"],"names":["isProductPopupOpen","ref","openProductPopup","filters","selectedItem","workList","columns","formatTime","value","calculateDuration","start","end","startTime","diffMs","applyProduct","selected","searchItems","mapped","axios","item","err","resetFilters","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_va_input","_cache","$event","_component_va_date_input","_hoisted_3","_component_va_button","_component_va_data_table","_withCtx","row","_createTextVNode","_toDisplayString","ProductSearchModal"],"mappings":"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"}