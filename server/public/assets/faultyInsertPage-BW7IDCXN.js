import{d as k,n,o as _,v as s,x as y,p as w,i as d,j as u,g as i,w as V,h as D,m as b,_ as x}from"./index-1iuYf_qr.js";const C={class:"product-page"},T={class:"product-container"},U={class:"product-form"},q={class:"form-buttons"},N=k({__name:"faultyInsertPage",setup(O){const a=n({productCode:"",code:"",processStage:"",faultyType:"",faultyDetail:"",faultyQuantity:"",occurDate:"",detail:""}),v=n([]),c=n([]),m=()=>{a.value={productCode:"",code:"",processStage:"",faultyType:"",faultyDetail:"",faultyQuantity:"",occurDate:"",detail:""},c.value=[]};_(async()=>{try{const l=await s.get("/faultys/productList");v.value=l.data.map(e=>({label:e.product_name,value:e.product_code}))}catch(l){console.error("제품명 목록 조회 실패:",l)}}),y(()=>a.value.productCode,async l=>{if(l)try{const e=await s.get("/faultys/faultyOrderNoList",{params:{productCode:l}});c.value=e.data.map(o=>({label:o.work_order_no,value:o.work_order_no}))}catch(e){console.error("작업지시서 번호 조회 실패:",e)}}),y(()=>a.value.code,async l=>{if(l)try{const e=await s.get("/faultys/faultyDetail",{params:{workOrderNo:l}});if(e.data.length>0){const o=e.data[0];a.value.processStage=o.process_name||"",a.value.faultyQuantity=o.insp_value_qty||"",a.value.occurDate=o.created_at||"",a.value.detail=o.qual_remark||""}}catch(e){console.error("불량 상세 정보 조회 실패:",e)}});const p=n([]);_(async()=>{try{const l=await s.get("/faultys/defectTypeList");p.value=l.data.map(e=>({label:e.defect_type_name,value:e.defect_type_name,remark:e.defect_type_remark}))}catch(l){console.error("불량유형 목록 조회 실패:",l)}}),y(()=>a.value.faultyType,l=>{const e=p.value.find(o=>o.value===l);a.value.faultyDetail=e?e.remark:""});const g=async()=>{try{const l={product_code:a.value.productCode,work_order_no:a.value.code,process_name:a.value.processStage,defect_type:a.value.faultyType,defect_detail:a.value.faultyDetail,quantity:Number(a.value.faultyQuantity),occur_date:a.value.occurDate,qual_remark:a.value.detail};(await s.post("/faultys/register",l)).status===200?(alert("불량품검사 등록 성공"),m()):alert("등록 실패")}catch(l){console.error("등록 오류:",l),alert("등록 중 오류가 발생했습니다.")}};return(l,e)=>{const o=i("va-select"),r=i("va-input"),f=i("va-button");return D(),w("div",C,[d("div",T,[d("div",null,[d("div",U,[e[10]||(e[10]=d("h3",{class:"form-title"},"불량품검사 등록",-1)),u(o,{modelValue:a.value.productCode,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.productCode=t),options:v.value,label:"제품명",class:"quarter-width","value-by":"value","text-by":"label",placeholder:"제품을 선택하세요"},null,8,["modelValue","options"]),u(o,{modelValue:a.value.code,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.code=t),options:c.value,label:"작업지시서번호",class:"quarter-width","value-by":"value","text-by":"label",placeholder:"작업지시서를 선택하세요"},null,8,["modelValue","options"]),u(r,{modelValue:a.value.processStage,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.processStage=t),label:"공정단계",readonly:""},null,8,["modelValue"]),u(o,{modelValue:a.value.faultyType,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.faultyType=t),options:p.value,label:"불량유형",class:"quarter-width","value-by":"value","text-by":"label",placeholder:"불량유형 선택하세요"},null,8,["modelValue","options"]),u(r,{modelValue:a.value.faultyDetail,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.faultyDetail=t),label:"불량상세",readonly:""},null,8,["modelValue"]),u(r,{modelValue:a.value.faultyQuantity,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.faultyQuantity=t),label:"불량수량",readonly:""},null,8,["modelValue"]),u(r,{modelValue:a.value.occurDate,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.occurDate=t),label:"불합판정일자",type:"date",readonly:""},null,8,["modelValue"]),u(r,{modelValue:a.value.detail,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.detail=t),label:"상세설명",readonly:""},null,8,["modelValue"]),d("div",q,[u(f,{onClick:g,color:"primary"},{default:V(()=>e[8]||(e[8]=[b("등록")])),_:1,__:[8]}),u(f,{onClick:m,color:"secondary"},{default:V(()=>e[9]||(e[9]=[b("초기화")])),_:1,__:[9]})])])])])])}}}),S=x(N,[["__scopeId","data-v-904daf90"]]);export{S as default};
//# sourceMappingURL=faultyInsertPage-BW7IDCXN.js.map
