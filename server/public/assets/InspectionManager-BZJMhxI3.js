import{d as M,n as p,o as I,v as d,x as U,c as y,p as m,i as l,j as a,g as v,w as k,F as g,y as q,h as c,m as T,t as u,_ as N}from"./index-tie9r4wu.js";const Q={class:"product-form"},R={class:"form-section"},L={class:"input-row"},h={class:"input-row"},C={class:"input-row"},F={class:"form-buttons"},B={class:"form-section"},j={class:"custom-table"},D=M({__name:"InspectionManager",setup(E){const i=p([]),s=p({processInt:"",inspValueType:"",inspUnit:"",inspValueQty:"",inspValueMin:0,inspValueMax:0,inspRemark:""}),r=p([]),_=()=>{s.value={processInt:"",inspValueType:"",inspUnit:"",inspValueQty:"",inspValueMin:0,inspValueMax:0,inspRemark:""}},b=async()=>{try{const t={processInt:s.value.processInt,inspValueType:s.value.inspValueType,inspUnit:s.value.inspUnit,inspValueQty:Number(s.value.inspValueQty),inspValueMin:Number(s.value.inspValueMin),inspValueMax:Number(s.value.inspValueMax),inspRemark:s.value.inspRemark},e=await d.post("/inspections/insert",t);e.data.success?(alert("검사항목이 등록되었습니다!"),await V(s.value.processInt),_()):alert(e.data.message||"등록 실패")}catch(t){console.error("등록 중 오류:",t),alert("등록 중 오류가 발생했습니다.")}},V=async t=>{if(!t){i.value=[];return}try{const e=await d.get("/inspections/list",{params:{processInt:t}});i.value=e.data}catch(e){console.error("검사기준 리스트 조회 실패:",e),i.value=[]}};I(async()=>{try{const t=await d.get("/inspections/processList");r.value=t.data}catch(t){console.error("공정명 목록 조회 실패:",t)}}),U(()=>s.value.processInt,t=>{V(t)}),y(()=>{const t=r.value.find(e=>e.process_int===s.value.processInt);return t?t.process_name:""});const f=y(()=>i.value);return(t,e)=>{const w=v("va-select"),o=v("va-input"),x=v("va-button");return c(),m("div",Q,[e[12]||(e[12]=l("h3",{class:"form-title"},"제품 검사서 등록",-1)),e[13]||(e[13]=l("br",null,null,-1)),l("div",R,[e[8]||(e[8]=l("h3",{class:"form-title"},"검사 유형 등록",-1)),e[9]||(e[9]=l("br",null,null,-1)),l("div",L,[a(w,{modelValue:s.value.processInt,"onUpdate:modelValue":e[0]||(e[0]=n=>s.value.processInt=n),options:r.value,"value-by":"process_int","text-by":"process_name",label:"공정명",class:"quarter-width"},null,8,["modelValue","options"]),a(o,{modelValue:s.value.inspValueType,"onUpdate:modelValue":e[1]||(e[1]=n=>s.value.inspValueType=n),label:"판정방식",class:"quarter-width"},null,8,["modelValue"]),a(o,{modelValue:s.value.inspUnit,"onUpdate:modelValue":e[2]||(e[2]=n=>s.value.inspUnit=n),label:"단위",class:"quarter-width"},null,8,["modelValue"])]),l("div",h,[a(o,{modelValue:s.value.inspValueQty,"onUpdate:modelValue":e[3]||(e[3]=n=>s.value.inspValueQty=n),label:"기준값",class:"quarter-width"},null,8,["modelValue"]),a(o,{modelValue:s.value.inspValueMin,"onUpdate:modelValue":e[4]||(e[4]=n=>s.value.inspValueMin=n),label:"최소범위",class:"quarter-width",type:"number"},null,8,["modelValue"]),a(o,{modelValue:s.value.inspValueMax,"onUpdate:modelValue":e[5]||(e[5]=n=>s.value.inspValueMax=n),label:"최대범위",class:"quarter-width",type:"number"},null,8,["modelValue"])]),l("div",C,[a(o,{modelValue:s.value.inspRemark,"onUpdate:modelValue":e[6]||(e[6]=n=>s.value.inspRemark=n),label:"비고",class:"quarter-width",type:"textarea",placeholder:"특이사항을 입력하세요"},null,8,["modelValue"])]),e[10]||(e[10]=l("br",null,null,-1)),l("div",F,[a(x,{onClick:b,color:"primary"},{default:k(()=>e[7]||(e[7]=[T("등록")])),_:1,__:[7]})])]),l("div",B,[l("table",j,[e[11]||(e[11]=l("thead",null,[l("tr",null,[l("th",null,"판정방식"),l("th",null,"단위"),l("th",null,"기준값"),l("th",null,"최소값"),l("th",null,"최대값"),l("th",null,"비고")])],-1)),l("tbody",null,[(c(!0),m(g,null,q(f.value,n=>(c(),m("tr",{key:n.insp_code},[l("td",null,u(n.insp_value_type),1),l("td",null,u(n.insp_unit),1),l("td",null,u(n.insp_value_qty),1),l("td",null,u(n.insp_value_min),1),l("td",null,u(n.insp_value_max),1),l("td",null,u(n.insp_remark),1)]))),128))])])])])}}}),S=N(D,[["__scopeId","data-v-e79a1b08"]]);export{S as default};
//# sourceMappingURL=InspectionManager-BZJMhxI3.js.map
