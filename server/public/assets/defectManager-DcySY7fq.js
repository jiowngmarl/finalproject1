import{d as w,n as f,o as b,p as i,i as t,j as n,g as C,w as p,F as N,y as x,v as c,h as m,m as _,t as y,_ as h}from"./index-fxpmRMrw.js";const D={class:"defect-form"},M={class:"form-section"},B={class:"input-row"},E={class:"form-buttons"},F={class:"form-section"},L={class:"custom-table"},U=["onClick"],q=w({__name:"defectManager",setup(I){const u=f([]),s=f({defectTypeCode:"",defectTypeName:"",defectremark:""}),v=async()=>{try{const l=await c.get("/defects/list");console.log("응답데이터 : ",l.data),u.value=l.data}catch(l){console.error("검사항목 조회 실패 : ",l)}},r=f(!1);function T(l){s.value={defectTypeCode:l.defect_type_code,defectTypeName:l.defect_type_name,defectremark:l.defect_type_remark},r.value=!0}const V=async()=>{var e,d;const l={defect_type_code:s.value.defectTypeCode,defect_type_name:s.value.defectTypeName,defect_type_remark:s.value.defectremark};try{r.value?(await c.post("/defects/update",l)).data.success?alert("수정성공"):alert("수정실패"):(await c.post("/defects/insert",l)).data.success&&(alert("등록 성공"),u.value.push({...l})),await v(),k()}catch(o){if(c.isAxiosError(o)){const a=(d=(e=o.response)==null?void 0:e.data)==null?void 0:d.message;alert(a==="중복"?"이미 존재하는 불량항목코드입니다":"등록 중 오류 발생: "+(a||o.message))}else alert("오류 발생")}};function k(){s.value={defectTypeCode:"",defectTypeName:"",defectremark:""},r.value=!1}function g(){alert("기능 미구현")}return b(()=>{v()}),(l,e)=>{const d=C("va-input"),o=C("va-button");return m(),i("div",D,[e[7]||(e[7]=t("h3",{class:"form-title"},"불량항목 등록",-1)),e[8]||(e[8]=t("br",null,null,-1)),t("div",M,[t("div",B,[n(d,{modelValue:s.value.defectTypeCode,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.defectTypeCode=a),label:"불량유형코드",class:"quarter-width",readonly:r.value},null,8,["modelValue","readonly"]),n(d,{modelValue:s.value.defectTypeName,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.defectTypeName=a),label:"불량명",class:"quarter-width"},null,8,["modelValue"]),n(d,{modelValue:s.value.defectremark,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.defectremark=a),label:"비고",class:"half-width"},null,8,["modelValue"])]),t("div",E,[n(o,{onClick:V,color:"primary"},{default:p(()=>e[3]||(e[3]=[_("등록")])),_:1,__:[3]}),n(o,{onClick:k,color:"secondary"},{default:p(()=>e[4]||(e[4]=[_("초기화")])),_:1,__:[4]}),n(o,{onClick:g,color:"danger"},{default:p(()=>e[5]||(e[5]=[_("삭제")])),_:1,__:[5]})])]),t("div",F,[t("table",L,[e[6]||(e[6]=t("thead",null,[t("tr",null,[t("th",null,"불량유형코드"),t("th",null,"불량명"),t("th",null,"비고")])],-1)),t("tbody",null,[(m(!0),i(N,null,x(u.value,(a,j)=>(m(),i("tr",{key:a.defect_type_code,onClick:A=>T(a)},[t("td",null,y(a.defect_type_code),1),t("td",null,y(a.defect_type_name),1),t("td",null,y(a.defect_type_remark),1)],8,U))),128))])])])])}}}),$=h(q,[["__scopeId","data-v-20f050d6"]]);export{$ as default};
//# sourceMappingURL=defectManager-DcySY7fq.js.map
