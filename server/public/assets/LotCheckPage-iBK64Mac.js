import{d as x,n as _,o as T,e as c,f as $,p as F,i as p,j as s,w as g,v as N,m as b,t as h,_ as B}from"./index-BJgCI8mH.js";const P={class:"material-inquiry-page"},Y={class:"search-form"},q={class:"button-group"},O=x({__name:"LotCheckPage",setup(j){const v=_([]),d=_([]),u=_(1),t=_({material_code:"",material_name:"",lot_number:"",received_date:null,material_unit:"",material_cls:""}),V=[{key:"lot_number",label:"LOT번호"},{key:"material_code",label:"자재코드"},{key:"material_name",label:"자재명"},{key:"quantity",label:"입고 수량"},{key:"material_unit",label:"단위"},{key:"material_cls",label:"분류"},{key:"received_date",label:"입고일자"}],y=l=>{const e=new Date(l),n=new Date(e.getTime()+9*60*60*1e3),i=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),m=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),a=String(n.getMinutes()).padStart(2,"0");return`${i}-${r}-${m} ${o}:${a}`},f=(l,e)=>l.getFullYear()===e.getFullYear()&&l.getMonth()===e.getMonth()&&l.getDate()===e.getDate(),k=()=>{const{material_code:l,material_name:e,lot_number:n,received_date:i,material_unit:r,material_cls:m}=t.value;d.value=v.value.filter(o=>{const a=!l||o.material_code.includes(l),L=!e||o.material_name.includes(e),C=!n||o.lot_number.includes(n),U=!i||f(new Date(o.received_date),new Date(i)),M=!r||o.material_unit.includes(r),w=!m||o.material_cls.includes(m);return a&&L&&C&&U&&M&&w}),u.value=1},S=()=>{t.value={material_code:"",material_name:"",lot_number:"",received_date:null,material_unit:"",material_cls:""},d.value=[...v.value],u.value=1},D=async()=>{try{const l=await N.get("/materialLotList");v.value=l.data,d.value=[...l.data]}catch(l){console.error("❌ 입고 내역 조회 실패:",l)}};return T(()=>{D()}),(l,e)=>{const n=c("va-input"),i=c("va-date-input"),r=c("va-button"),m=c("va-data-table"),o=c("va-pagination");return $(),F("div",P,[e[10]||(e[10]=p("h2",{class:"page-title"},"자재 입고 조회",-1)),p("div",Y,[s(n,{modelValue:t.value.material_code,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.material_code=a),label:"자재코드"},null,8,["modelValue"]),s(n,{modelValue:t.value.material_name,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.material_name=a),label:"자재명"},null,8,["modelValue"]),s(n,{modelValue:t.value.lot_number,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.lot_number=a),label:"LOT번호"},null,8,["modelValue"]),s(i,{modelValue:t.value.received_date,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.received_date=a),label:"입고일자","manual-input":!1,clearable:!0},null,8,["modelValue"]),s(n,{modelValue:t.value.material_unit,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.material_unit=a),label:"단위"},null,8,["modelValue"]),s(n,{modelValue:t.value.material_cls,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.material_cls=a),label:"분류"},null,8,["modelValue"]),p("div",q,[s(r,{onClick:k},{default:g(()=>e[8]||(e[8]=[b(" 검색 ")])),_:1,__:[8]}),s(r,{color:"secondary",onClick:S},{default:g(()=>e[9]||(e[9]=[b(" 초기화 ")])),_:1,__:[9]})])]),s(m,{"current-page":u.value,"onUpdate:currentPage":e[6]||(e[6]=a=>u.value=a),items:d.value,columns:V,"per-page":10,"track-by":"lot_number"},{"cell(received_date)":g(({row:a})=>[b(h(y(a.source.received_date)),1)]),_:1},8,["current-page","items"]),s(o,{modelValue:u.value,"onUpdate:modelValue":e[7]||(e[7]=a=>u.value=a),pages:Math.ceil(d.value.length/10),class:"mt-4"},null,8,["modelValue","pages"])])}}}),H=B(O,[["__scopeId","data-v-48652b21"]]);export{H as default};
//# sourceMappingURL=LotCheckPage-iBK64Mac.js.map
