{"version":3,"file":"deliveryCheckPage-DlKbSCis.js","sources":["../../../client/src/pages/material/deliveryCheckPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"order-search-page\">\r\n    <!-- 출고 조회 -->\r\n    <div class=\"search-section\">\r\n      <h3 class=\"section-title\">출고 조회</h3>\r\n      <div class=\"search-form\">\r\n        <va-input v-model=\"filters.outbound_id\" label=\"출고코드\" />\r\n        <va-date-input v-model=\"filters.outbound_date\" label=\"출고일자\" :manual-input=\"false\" :clearable=\"true\" />\r\n        <va-input v-model=\"filters.material_code\" label=\"자재코드\" />\r\n        <va-input v-model=\"filters.material_name\" label=\"자재명\" />\r\n        <va-input v-model=\"filters.material_cls\" label=\"분류\" />\r\n        <va-input v-model=\"filters.lot_number\" label=\"LOT번호\"/>\r\n\r\n        <div class=\"button-group\">\r\n          <va-button @click=\"searchOrders\">조회</va-button>\r\n          <va-button color=\"secondary\" @click=\"resetFilters\">초기화</va-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 발주 요청 리스트 -->\r\n    <div class=\"result-section\">\r\n      <h3 class=\"section-title\">출고 리스트</h3>\r\n      <div class=\"table-wrapper\">\r\n        <va-data-table\r\n          :items=\"outboundList\"\r\n          :columns=\"columns\"\r\n          :per-page=\"perPage\"\r\n          :current-page.sync=\"page\"\r\n        >\r\n\r\n          <template #cell(outbound_date)=\"{ row }\">\r\n            {{ formatDateForView(row.source.outbound_date) }}\r\n          </template>\r\n        </va-data-table>\r\n\r\n        <va-pagination\r\n          v-model=\"page\"\r\n          :pages=\"Math.max(1, Math.ceil(outboundList.length / perPage))\"\r\n          class=\"mt-2\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport axios from 'axios'\r\nimport { ref, onMounted } from 'vue'\r\n\r\ninterface Outbound {\r\n  outbound_id: string\r\n  material_code: string\r\n  material_name: string\r\n  material_unit: number\r\n  material_cls: string\r\n  outbound_date: string\r\n  outbound_qty: number\r\n  lot_number: string\r\n}\r\n\r\nconst filters = ref({\r\n  outbound_id: '',\r\n  material_code: '',\r\n  material_name: '',\r\n  material_unit: '',\r\n  material_cls: '',\r\n  outbound_date: null as Date | null,\r\n  outbound_qty: '',\r\n  lot_number: '',\r\n})\r\n\r\nconst outboundList = ref<Outbound[]>([])\r\nconst allOutbounds = ref<Outbound[]>([])\r\nconst perPage = 5\r\n\r\nconst page = ref(1)\r\n\r\n\r\nconst formatDateForView = (date: Date | string | null | undefined): string => {\r\n  if (!date) return ''\r\n  const d = typeof date === 'string' ? new Date(date) : date\r\n  return `${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}`\r\n}\r\n\r\nconst columns = [\r\n  { key: 'outbound_id', label: '발주코드' },\r\n  { key: 'material_code', label: '자재코드' },\r\n  { key: 'material_name', label: '자재명' },\r\n  { key: 'material_unit', label: '단위' },\r\n  { key: 'material_cls', label: '분류' },\r\n  { key: 'outbound_date', label: '출고 일자' },\r\n  { key: 'outbound_qty', label: '출고 수량' },\r\n  { key: 'lot_number', label: 'LOT 번호' }\r\n]\r\n\r\nconst fetchPurchase = async () => {\r\n  try {\r\n    const res = await axios.get('/deliveryCheck')\r\n    allOutbounds.value = Array.isArray(res.data) ? res.data : []\r\n    outboundList.value = [...allOutbounds.value]\r\n    console.log(\"allOrders: \", res.data)\r\n    console.log(\"order: \", outboundList.value)\r\n    \r\n  } catch (err) {\r\n    console.error('계획 조회 실패', err)\r\n    allOutbounds.value = []\r\n  }\r\n}\r\n\r\nfunction isSameDate(d1: Date, d2: Date): boolean {\r\n  return (\r\n    d1.getFullYear() === d2.getFullYear() &&\r\n    d1.getMonth() === d2.getMonth() &&\r\n    d1.getDate() === d2.getDate()\r\n  )\r\n}\r\n\r\n\r\nfunction searchOrders() {\r\n  const {\r\n    outbound_id,\r\n    material_code,\r\n    material_name,\r\n    outbound_date,\r\n    material_cls,\r\n    lot_number,\r\n  } = filters.value\r\n\r\n  outboundList.value = allOutbounds.value.filter((outbound) => {\r\n    const matchesOutboundId = !outbound_id || outbound.outbound_id.includes(outbound_id)\r\n    const matchesMaterialId = !material_code || outbound.material_code.includes(material_code)\r\n    const matchesMaterialName = !material_name || outbound.material_name.includes(material_name)\r\n    const matchesMaterialCls = !material_cls || outbound.material_cls.includes(material_cls)\r\n    const matchesMaterialLotNumber = !lot_number || outbound.lot_number.includes(lot_number)\r\n\r\n    const matchesOutboundDate =\r\n      !outbound_date || isSameDate(new Date(outbound.outbound_date), new Date(outbound_date))\r\n\r\n    return (\r\n      matchesOutboundId &&\r\n      matchesMaterialId &&\r\n      matchesMaterialName &&\r\n      matchesMaterialCls &&\r\n      matchesOutboundDate &&\r\n      matchesMaterialLotNumber\r\n    )\r\n  })\r\n  page.value = 1\r\n}\r\n\r\nfunction resetFilters() {\r\n  filters.value = {\r\n    outbound_id: '',\r\n    material_code: '',\r\n    material_name: '',\r\n    material_unit: '',\r\n    material_cls: '',\r\n    outbound_date: null,\r\n    outbound_qty: '',\r\n    lot_number: '',\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchPurchase()\r\n})\r\n</script>\r\n\r\n\r\n\r\n<style scoped>\r\n.order-search-page {\r\n  padding: 20px;\r\n  max-width: 1400px;\r\n  margin: auto;\r\n}\r\n.section-title {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n  margin-bottom: 15px;\r\n}\r\n.search-form {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  column-gap: 20px;\r\n  row-gap: 16px;\r\n}\r\n.button-group {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 10px;\r\n}\r\n.result-section {\r\n  margin-top: 30px;\r\n  width: 100%;\r\n}\r\n.table-wrapper {\r\n  width: 100%;\r\n  overflow-x: auto; /* 필요 시만 스크롤 생김 */\r\n}\r\n.order-page {\r\n  padding: 20px;\r\n}\r\n\r\n.title {\r\n  text-align: center;\r\n  font-size: 24px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.top-tables {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.info-table {\r\n  border-collapse: collapse;\r\n  width: 48%;\r\n  font-size: 14px;\r\n}\r\n\r\n.info-table th,\r\n.info-table td {\r\n  border: 1px solid #000;\r\n  padding: 6px;\r\n  text-align: left;\r\n}\r\n\r\n.request-text {\r\n  margin-top: 20px;\r\n  font-size: 16px;\r\n}\r\n\r\n.item-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 10px;\r\n  font-size: 14px;\r\n}\r\n\r\n.item-table th,\r\n.item-table td {\r\n  border: 1px solid #000;\r\n  padding: 6px;\r\n  text-align: center;\r\n}\r\n\r\n.footer {\r\n  font-size: 13px;\r\n  margin-top: 20px;\r\n}\r\n</style>"],"names":["perPage","filters","ref","outboundList","allOutbounds","page","formatDateForView","date","d","columns","fetchPurchase","res","axios","err","isSameDate","d1","d2","searchOrders","outbound_id","material_code","material_name","outbound_date","material_cls","lot_number","outbound","matchesOutboundId","matchesMaterialId","matchesMaterialName","matchesMaterialCls","matchesMaterialLotNumber","matchesOutboundDate","resetFilters","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","_hoisted_3","_createVNode","_component_va_input","$event","_component_va_date_input","_hoisted_4","_component_va_button","_hoisted_5","_hoisted_6","_component_va_data_table","_withCtx","row","_createTextVNode","_toDisplayString","_component_va_pagination"],"mappings":"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"}