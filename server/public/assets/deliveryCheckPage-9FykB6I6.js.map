{"version":3,"file":"deliveryCheckPage-9FykB6I6.js","sources":["../../../client/src/pages/material/deliveryCheckPage.vue"],"sourcesContent":["<template>\n  <div class=\"order-search-page\">\n    <!-- 출고 조회 -->\n    <div class=\"search-section\">\n      <h3 class=\"section-title\">출고 조회</h3>\n      <div class=\"search-form\">\n        <va-input v-model=\"filters.outbound_id\" label=\"출고코드\" />\n        <va-date-input\n          v-model=\"filters.outbound_date\"\n          label=\"출고일자\"\n          :manual-input=\"false\"\n          :clearable=\"true\"\n        />\n        <va-input v-model=\"filters.material_code\" label=\"자재코드\" />\n        <va-input v-model=\"filters.material_name\" label=\"자재명\" />\n        <va-input v-model=\"filters.material_cls\" label=\"분류\" />\n        <va-input v-model=\"filters.lot_number\" label=\"LOT번호\" />\n\n        <div class=\"button-group\">\n          <va-button @click=\"searchOrders\"> 조회 </va-button>\n          <va-button color=\"secondary\" @click=\"resetFilters\">\n            초기화\n          </va-button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 발주 요청 리스트 -->\n    <div class=\"result-section\">\n      <h3 class=\"section-title\">출고 리스트</h3>\n      <div class=\"table-wrapper\">\n        <va-data-table\n          v-model:current-page=\"page\"\n          :items=\"outboundList\"\n          :columns=\"columns\"\n          :per-page=\"perPage\"\n        >\n          <template #cell(outbound_date)=\"{ row }\">\n            {{ formatDateForView(row.source.outbound_date) }}\n          </template>\n        </va-data-table>\n\n        <va-pagination\n          v-model=\"page\"\n          :pages=\"Math.max(1, Math.ceil(outboundList.length / perPage))\"\n          class=\"mt-2\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport axios from \"axios\";\nimport { ref, onMounted } from \"vue\";\n\ninterface Outbound {\n  outbound_id: string;\n  material_code: string;\n  material_name: string;\n  material_unit: number;\n  material_cls: string;\n  outbound_date: string;\n  outbound_qty: number;\n  lot_number: string;\n}\n\nconst filters = ref({\n  outbound_id: \"\",\n  material_code: \"\",\n  material_name: \"\",\n  material_unit: \"\",\n  material_cls: \"\",\n  outbound_date: null as Date | null,\n  outbound_qty: \"\",\n  lot_number: \"\",\n});\n\nconst outboundList = ref<Outbound[]>([]);\nconst allOutbounds = ref<Outbound[]>([]);\nconst perPage = 5;\n\nconst page = ref(1);\n\nconst formatDateForView = (date: Date | string | null | undefined): string => {\n  if (!date) return \"\";\n  const d = typeof date === \"string\" ? new Date(date) : date;\n  return `${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}`;\n};\n\nconst columns = [\n  { key: \"outbound_id\", label: \"발주코드\" },\n  { key: \"material_code\", label: \"자재코드\" },\n  { key: \"material_name\", label: \"자재명\" },\n  { key: \"material_unit\", label: \"단위\" },\n  { key: \"material_cls\", label: \"분류\" },\n  { key: \"outbound_date\", label: \"출고 일자\" },\n  { key: \"outbound_qty\", label: \"출고 수량\" },\n  { key: \"lot_number\", label: \"LOT 번호\" },\n];\n\nconst fetchPurchase = async () => {\n  try {\n    const res = await axios.get(\"/deliveryCheck\");\n    allOutbounds.value = Array.isArray(res.data) ? res.data : [];\n    outboundList.value = [...allOutbounds.value];\n    console.log(\"allOrders: \", res.data);\n    console.log(\"order: \", outboundList.value);\n  } catch (err) {\n    console.error(\"계획 조회 실패\", err);\n    allOutbounds.value = [];\n  }\n};\n\nfunction isSameDate(d1: Date, d2: Date): boolean {\n  return (\n    d1.getFullYear() === d2.getFullYear() &&\n    d1.getMonth() === d2.getMonth() &&\n    d1.getDate() === d2.getDate()\n  );\n}\n\nfunction searchOrders() {\n  const {\n    outbound_id,\n    material_code,\n    material_name,\n    outbound_date,\n    material_cls,\n    lot_number,\n  } = filters.value;\n\n  outboundList.value = allOutbounds.value.filter((outbound) => {\n    const matchesOutboundId =\n      !outbound_id || outbound.outbound_id.includes(outbound_id);\n    const matchesMaterialId =\n      !material_code || outbound.material_code.includes(material_code);\n    const matchesMaterialName =\n      !material_name || outbound.material_name.includes(material_name);\n    const matchesMaterialCls =\n      !material_cls || outbound.material_cls.includes(material_cls);\n    const matchesMaterialLotNumber =\n      !lot_number || outbound.lot_number.includes(lot_number);\n\n    const matchesOutboundDate =\n      !outbound_date ||\n      isSameDate(new Date(outbound.outbound_date), new Date(outbound_date));\n\n    return (\n      matchesOutboundId &&\n      matchesMaterialId &&\n      matchesMaterialName &&\n      matchesMaterialCls &&\n      matchesOutboundDate &&\n      matchesMaterialLotNumber\n    );\n  });\n  page.value = 1;\n}\n\nfunction resetFilters() {\n  filters.value = {\n    outbound_id: \"\",\n    material_code: \"\",\n    material_name: \"\",\n    material_unit: \"\",\n    material_cls: \"\",\n    outbound_date: null,\n    outbound_qty: \"\",\n    lot_number: \"\",\n  };\n}\n\nonMounted(() => {\n  fetchPurchase();\n});\n</script>\n\n<style scoped>\n.order-search-page {\n  padding: 20px;\n  max-width: 1400px;\n  margin: auto;\n}\n.section-title {\n  font-size: 1.2rem;\n  font-weight: bold;\n  margin-bottom: 15px;\n}\n.search-form {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 20px;\n  row-gap: 16px;\n}\n.button-group {\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n}\n.result-section {\n  margin-top: 30px;\n  width: 100%;\n}\n.table-wrapper {\n  width: 100%;\n  overflow-x: auto; /* 필요 시만 스크롤 생김 */\n}\n.order-page {\n  padding: 20px;\n}\n\n.title {\n  text-align: center;\n  font-size: 24px;\n  margin-bottom: 20px;\n}\n\n.top-tables {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20px;\n}\n\n.info-table {\n  border-collapse: collapse;\n  width: 48%;\n  font-size: 14px;\n}\n\n.info-table th,\n.info-table td {\n  border: 1px solid #000;\n  padding: 6px;\n  text-align: left;\n}\n\n.request-text {\n  margin-top: 20px;\n  font-size: 16px;\n}\n\n.item-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 10px;\n  font-size: 14px;\n}\n\n.item-table th,\n.item-table td {\n  border: 1px solid #000;\n  padding: 6px;\n  text-align: center;\n}\n\n.footer {\n  font-size: 13px;\n  margin-top: 20px;\n}\n</style>\n"],"names":["perPage","filters","ref","outboundList","allOutbounds","page","formatDateForView","date","d","columns","fetchPurchase","res","axios","err","isSameDate","d1","d2","searchOrders","outbound_id","material_code","material_name","outbound_date","material_cls","lot_number","outbound","matchesOutboundId","matchesMaterialId","matchesMaterialName","matchesMaterialCls","matchesMaterialLotNumber","matchesOutboundDate","resetFilters","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","_hoisted_3","_createVNode","_component_va_input","$event","_component_va_date_input","_hoisted_4","_component_va_button","_hoisted_5","_hoisted_6","_component_va_data_table","_withCtx","row","_createTextVNode","_toDisplayString","_component_va_pagination"],"mappings":"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"}