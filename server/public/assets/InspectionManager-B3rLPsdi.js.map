{"version":3,"file":"InspectionManager-B3rLPsdi.js","sources":["../../../client/src/pages/quality/InspectionManager.vue"],"sourcesContent":["<template>\n  <div class=\"product-form\">\n    <h3 class=\"form-title\">제품 검사서 등록</h3>\n    <br />\n\n    <!-- 검사 유형 등록 폼 -->\n    <div class=\"form-section\">\n      <h3 class=\"form-title\">검사 유형 등록</h3>\n      <br />\n\n      <div class=\"input-row\">\n        <va-select\n          v-model=\"form.processInt\"\n          :options=\"processOptions\"\n          value-by=\"process_int\"\n          text-by=\"process_name\"\n          label=\"공정명\"\n          class=\"quarter-width\"\n        />\n        <va-input\n          v-model=\"form.inspValueType\"\n          label=\"판정방식\"\n          class=\"quarter-width\"\n        />\n        <va-input v-model=\"form.inspUnit\" label=\"단위\" class=\"quarter-width\" />\n      </div>\n\n      <div class=\"input-row\">\n        <va-input\n          v-model=\"form.inspValueQty\"\n          label=\"기준값\"\n          class=\"quarter-width\"\n        />\n        <va-input\n          v-model=\"form.inspValueMin\"\n          label=\"최소범위\"\n          class=\"quarter-width\"\n          type=\"number\"\n        />\n        <va-input\n          v-model=\"form.inspValueMax\"\n          label=\"최대범위\"\n          class=\"quarter-width\"\n          type=\"number\"\n        />\n      </div>\n\n      <div class=\"input-row\">\n        <va-input\n          v-model=\"form.inspRemark\"\n          label=\"비고\"\n          class=\"quarter-width\"\n          type=\"textarea\"\n          placeholder=\"특이사항을 입력하세요\"\n        />\n      </div>\n\n      <br />\n\n      <div class=\"form-buttons\">\n        <va-button @click=\"submitForm\" color=\"primary\">등록</va-button>\n      </div>\n    </div>\n\n    <!-- 검사 리스트 테이블 -->\n    <div class=\"form-section\">\n      <table class=\"custom-table\">\n        <thead>\n          <tr>\n            <th>판정방식</th>\n            <th>단위</th>\n            <th>기준값</th>\n            <th>최소값</th>\n            <th>최대값</th>\n            <th>비고</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"item in filteredInspectionList\" :key=\"item.insp_code\">\n            <td>{{ item.insp_value_type }}</td>\n            <td>{{ item.insp_unit }}</td>\n            <td>{{ item.insp_value_qty }}</td>\n            <td>{{ item.insp_value_min }}</td>\n            <td>{{ item.insp_value_max }}</td>\n            <td>{{ item.insp_remark }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref, computed, onMounted, watch } from \"vue\";\nimport axios from \"axios\";\n\n// 타입 정의\ninterface InspectionItem {\n  process_name: string;\n  insp_code: string;\n  insp_value_type: string;\n  insp_unit: string;\n  insp_value_qty: number;\n  insp_value_min: number;\n  insp_value_max: number;\n  insp_remark: string;\n  checked?: boolean;\n}\n\n// 상태 정의\nconst inspectionList = ref<InspectionItem[]>([]);\n\nconst form = ref({\n  processInt: \"\", // ✅ string으로 변경\n  inspValueType: \"\",\n  inspUnit: \"\",\n  inspValueQty: \"\",\n  inspValueMin: 0,\n  inspValueMax: 0,\n  inspRemark: \"\",\n});\n\n// 공정명 select 옵션\nconst processOptions = ref<{ process_int: string; process_name: string }[]>([]); // ✅ process_int도 string\n\nconst resetForm = () => {\n  form.value = {\n    processInt: \"\",\n    inspValueType: \"\",\n    inspUnit: \"\",\n    inspValueQty: \"\",\n    inspValueMin: 0,\n    inspValueMax: 0,\n    inspRemark: \"\",\n  };\n};\n\n// 등록 요청\nconst submitForm = async () => {\n  try {\n    const payload = {\n      processInt: form.value.processInt,\n      inspValueType: form.value.inspValueType,\n      inspUnit: form.value.inspUnit,\n      inspValueQty: Number(form.value.inspValueQty),\n      inspValueMin: Number(form.value.inspValueMin),\n      inspValueMax: Number(form.value.inspValueMax),\n      inspRemark: form.value.inspRemark,\n    };\n\n    const res = await axios.post(\"/inspections/insert\", payload);\n\n    if (res.data.success) {\n      alert(\"검사항목이 등록되었습니다!\");\n      await loadInspectionList(form.value.processInt);\n      resetForm();\n    } else {\n      alert(res.data.message || \"등록 실패\");\n    }\n  } catch (err: any) {\n    console.error(\"등록 중 오류:\", err);\n    alert(\"등록 중 오류가 발생했습니다.\");\n  }\n};\n\n// 검사 리스트 조회\nconst loadInspectionList = async (processInt: string) => {\n  if (!processInt) {\n    inspectionList.value = [];\n    return;\n  }\n  try {\n    const res = await axios.get(\"/inspections/list\", {\n      params: { processInt },\n    });\n    inspectionList.value = res.data;\n  } catch (err) {\n    console.error(\"검사기준 리스트 조회 실패:\", err);\n    inspectionList.value = [];\n  }\n};\n\n// 공정명 목록 조회\nonMounted(async () => {\n  try {\n    const res = await axios.get(\"/inspections/processList\");\n    processOptions.value = res.data;\n  } catch (err) {\n    console.error(\"공정명 목록 조회 실패:\", err);\n  }\n});\n\n// 공정 선택 시 검사리스트 불러오기\nwatch(\n  () => form.value.processInt,\n  (newVal) => {\n    loadInspectionList(newVal);\n  },\n);\n\n// 현재 선택된 공정의 이름\nconst selectedProcessName = computed(() => {\n  const found = processOptions.value.find(\n    (p) => p.process_int === form.value.processInt,\n  );\n  return found ? found.process_name : \"\";\n});\n\n// 전체 리스트 출력\nconst filteredInspectionList = computed(() => inspectionList.value);\n</script>\n\n<style scoped>\n/* 전체 레이아웃 */\n.product-page {\n  padding: 1.5rem;\n  display: flex;\n  justify-content: center;\n  height: 739px;\n}\n\n.product-container {\n  width: 1060px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.product-form {\n  border-radius: 0.5rem;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);\n  padding: 1rem;\n}\n\n/* 섹션 스타일 */\n.form-section {\n  border: 1px solid #ccc;\n  border-radius: 0.5rem;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  background-color: white;\n}\n\n.form-title {\n  font-size: 1.125rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n\n/* 입력 행 정렬 */\n.input-row {\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 0.5rem;\n}\n\n/* 너비 클래스 */\n.quarter-width {\n  flex: 1;\n}\n\n.half-width {\n  flex: 2;\n}\n\n/* 버튼 정렬 */\n.form-buttons {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.5rem;\n  margin-top: 0.5rem;\n}\n\n/* 테이블 스타일 */\n.custom-table {\n  width: 100%;\n  border-collapse: collapse;\n  background-color: white;\n  border-radius: 0.5rem;\n  overflow: hidden;\n}\n\n.custom-table th,\n.custom-table td {\n  padding: 0.75rem;\n  border-bottom: 1px solid #e0e0e0;\n  text-align: center;\n}\n\n.custom-table th {\n  background-color: #ffffff;\n  font-weight: bold;\n}\n</style>\n"],"names":["inspectionList","ref","form","processOptions","resetForm","submitForm","payload","res","axios","loadInspectionList","err","processInt","onMounted","watch","newVal","computed","found","p","filteredInspectionList","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_va_select","$event","_component_va_input","_hoisted_4","_hoisted_5","_hoisted_6","_component_va_button","_hoisted_7","_hoisted_8","_Fragment","_renderList","item","_toDisplayString"],"mappings":"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"}