import{d as N,n as i,p as S,i as w,j as l,g as p,w as u,h as O,m as n,t as _,v as C,_ as T}from"./index-fxpmRMrw.js";import{_ as P}from"./ProductSearchModal.vue_vue_type_script_setup_true_lang-B1FAUjpH.js";const U={class:"va-pa-4"},x={class:"search-grid va-mb-4"},M={class:"button-group va-mt-2"},q=N({__name:"resultCheckPage",setup($){const s=i(!1),b=()=>{s.value=!0},o=i({workOrder:"",productName:"",productSpec:"",resultId:"",workDate:""}),m=i({final_qty:0}),c=i([]),y=[{key:"result_id",label:"실적ID"},{key:"process_code",label:"공정코드"},{key:"process_name",label:"공정명"},{key:"work_start_time",label:"시작시간"},{key:"work_end_time",label:"종료시간"},{key:"duration",label:"소요시간(분)"}],v=a=>a?new Date(a).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):"-",V=(a,e)=>{if(!a||!e)return"-";const r=new Date(a),d=new Date(e).getTime()-r.getTime();return`${Math.floor(d/6e4)}분`},D=a=>{o.value.workOrder=a.work_order_no||a.workOrderNo||"",o.value.productName=a.product_name||a.productName||"",o.value.productSpec=a.product_stand||a.productSpec||"",o.value.resultId=a.result_id||a.resultId||"",s.value=!1},g=async()=>{try{if(!o.value.workOrder||!o.value.productSpec){alert("작업지시서 번호 또는 제품규격이 누락되었습니다.");return}const e=(await C.get(`/prodResult/${o.value.workOrder}/${o.value.productSpec}`)).data.map(r=>({...r,selected:!1}));c.value=e}catch(a){alert("실적 조회 실패"),console.error(a)}},I=()=>{o.value={workOrder:"",productName:"",productSpec:"",resultId:"",workDate:""},m.value.final_qty=0,c.value=[]};return(a,e)=>{const r=p("va-input"),k=p("va-date-input"),d=p("va-button"),f=p("va-data-table");return O(),S("div",U,[w("div",x,[l(r,{modelValue:o.value.workOrder,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.workOrder=t),label:"작업지시서 번호",placeholder:"작업지시서 번호 입력",readonly:""},null,8,["modelValue"]),l(r,{modelValue:o.value.productName,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.productName=t),label:"제품명",placeholder:"제품명 입력",readonly:""},null,8,["modelValue"]),l(r,{modelValue:o.value.productSpec,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.productSpec=t),label:"제품규격",placeholder:"제품 규격 입력",readonly:""},null,8,["modelValue"]),l(r,{modelValue:o.value.resultId,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.resultId=t),label:"작업실적 ID",placeholder:"작업 실적 ID 입력",readonly:""},null,8,["modelValue"]),l(k,{modelValue:o.value.workDate,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.workDate=t),label:"작업일자","manual-input":!1,clearable:!0},null,8,["modelValue"]),l(r,{modelValue:m.value.final_qty,"onUpdate:modelValue":e[5]||(e[5]=t=>m.value.final_qty=t),modelModifiers:{number:!0},label:"최종 수량"},null,8,["modelValue"]),w("div",M,[l(d,{color:"info",onClick:b},{default:u(()=>e[7]||(e[7]=[n("작업지시 검색")])),_:1,__:[7]}),l(d,{color:"primary",onClick:g},{default:u(()=>e[8]||(e[8]=[n("조회")])),_:1,__:[8]}),l(d,{color:"secondary",onClick:I},{default:u(()=>e[9]||(e[9]=[n("초기화")])),_:1,__:[9]})])]),l(f,{items:c.value,columns:y,"track-by":"result_id"},{"cell(work_start_time)":u(({row:t})=>[n(_(v(t.rowData.work_start_time)),1)]),"cell(work_end_time)":u(({row:t})=>[n(_(v(t.rowData.work_end_time)),1)]),"cell(duration)":u(({row:t})=>[n(_(V(t.rowData.work_start_time,t.rowData.work_end_time)),1)]),_:1},8,["items"]),l(P,{visible:s.value,"onUpdate:visible":e[6]||(e[6]=t=>s.value=t),onApply:D},null,8,["visible"])])}}}),R=T(q,[["__scopeId","data-v-4d7f34db"]]);export{R as default};
//# sourceMappingURL=resultCheckPage-C_Y6W27a.js.map
